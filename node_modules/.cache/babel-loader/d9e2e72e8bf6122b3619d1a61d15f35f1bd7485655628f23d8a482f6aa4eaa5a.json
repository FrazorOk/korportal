{"ast":null,"code":"import{useEffect,useState}from'react';import s from'./UsersList.module.css';import{useMsal}from'@azure/msal-react';import{getAllUsers}from'../../api/graph';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UsersList=_ref=>{let{addLinkHandler}=_ref;const{instance,accounts}=useMsal();let[isUsers,setUsers]=useState([]);let[isCurrentUsers,setCurrentUsers]=useState([]);let[isSearch,setSearch]=useState('');function RequestUsersData(){instance.acquireTokenSilent({scopes:['User.Read.All'],account:accounts[0]}).then(response=>{getAllUsers(response.accessToken).then(response=>response.json()).then(result=>{let enabledUsers=result.value.filter(item=>item.accountEnabled===true);setUsers(enabledUsers);});});}useEffect(()=>{RequestUsersData();},[]);useEffect(()=>{setCurrentUsers(isUsers);},[isUsers]);useEffect(()=>{console.log(isCurrentUsers);},[isCurrentUsers]);let searchHandler=()=>{let inputValue=isSearch.toUpperCase();if(inputValue){let found=isUsers.filter(el=>{let elText=el.displayName.toUpperCase();if(elText.indexOf(inputValue)>-1){return el;}return 0;});if(found.length>0){isCurrentUsers(found);}else{isCurrentUsers([]);}}else{isCurrentUsers(isUsers);}};return/*#__PURE__*/_jsxs(\"div\",{className:s.users,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:isSearch,onChange:e=>setSearch(e.currentTarget.value)}),isCurrentUsers&&isCurrentUsers.map(user=>/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.preventDefault();addLinkHandler(user.id,user.displayName);},children:/*#__PURE__*/_jsx(\"p\",{children:user.displayName})}))]});};export default UsersList;","map":{"version":3,"names":["useEffect","useState","s","useMsal","getAllUsers","jsx","_jsx","jsxs","_jsxs","UsersList","_ref","addLinkHandler","instance","accounts","isUsers","setUsers","isCurrentUsers","setCurrentUsers","isSearch","setSearch","RequestUsersData","acquireTokenSilent","scopes","account","then","response","accessToken","json","result","enabledUsers","value","filter","item","accountEnabled","console","log","searchHandler","inputValue","toUpperCase","found","el","elText","displayName","indexOf","length","className","users","children","type","onChange","e","currentTarget","map","user","onClick","preventDefault","id"],"sources":["C:/Users/zhuikov/OneDrive - SOFTCOM/Desktop/web/2024/korportal/src/components/UsersList/UsersList.jsx"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport s from './UsersList.module.css';\r\nimport { useMsal } from '@azure/msal-react';\r\nimport { getAllUsers } from '../../api/graph';\r\n\r\nconst UsersList = ({ addLinkHandler }) => {\r\n\tconst { instance, accounts } = useMsal();\r\n\tlet [isUsers, setUsers] = useState([]);\r\n\tlet [isCurrentUsers, setCurrentUsers] = useState([]);\r\n\tlet [isSearch, setSearch] = useState('');\r\n\r\n\tfunction RequestUsersData() {\r\n\t\tinstance\r\n\t\t\t.acquireTokenSilent({\r\n\t\t\t\tscopes: ['User.Read.All'],\r\n\t\t\t\taccount: accounts[0],\r\n\t\t\t})\r\n\t\t\t.then((response) => {\r\n\t\t\t\tgetAllUsers(response.accessToken)\r\n\t\t\t\t\t.then((response) => response.json())\r\n\t\t\t\t\t.then((result) => {\r\n\t\t\t\t\t\tlet enabledUsers = result.value.filter((item) => item.accountEnabled === true);\r\n\t\t\t\t\t\tsetUsers(enabledUsers);\r\n\t\t\t\t\t});\r\n\t\t\t});\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tRequestUsersData();\r\n\t}, []);\r\n\tuseEffect(() => {\r\n\t\tsetCurrentUsers(isUsers);\r\n\t}, [isUsers]);\r\n\tuseEffect(() => {\r\n\t\tconsole.log(isCurrentUsers);\r\n\t}, [isCurrentUsers]);\r\n\r\n\tlet searchHandler = () => {\r\n\t\tlet inputValue = isSearch.toUpperCase();\r\n\r\n\t\tif (inputValue) {\r\n\t\t\tlet found = isUsers.filter((el) => {\r\n\t\t\t\tlet elText = el.displayName.toUpperCase();\r\n\r\n\t\t\t\tif (elText.indexOf(inputValue) > -1) {\r\n\t\t\t\t\treturn el;\r\n\t\t\t\t}\r\n\t\t\t\treturn 0;\r\n\t\t\t});\r\n\r\n\t\t\tif (found.length > 0) {\r\n\t\t\t\tisCurrentUsers(found);\r\n\t\t\t} else {\r\n\t\t\t\tisCurrentUsers([]);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tisCurrentUsers(isUsers);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className={s.users}>\r\n\t\t\t<input type=\"text\" value={isSearch} onChange={(e) => setSearch(e.currentTarget.value)} />\r\n\t\t\t{isCurrentUsers &&\r\n\t\t\t\tisCurrentUsers.map((user) => (\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\taddLinkHandler(user.id, user.displayName);\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t<p>{user.displayName}</p>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t))}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default UsersList;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}