{"ast":null,"code":"import s from'./NotificationModule.module.css';import bellIcon from'../../assets/img/icons/bell-icon.svg';import newsIcon from'../../assets/img/icons/fi-rs-apps.svg';import{useEffect,useState}from'react';import{getNews}from'../../api/api';import{useSelector}from'react-redux';import{userSelector}from'../../selectors/userSelectors';import{useOutsideClick}from'../../hooks/useOutsideClick';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const NotificationModule=_ref=>{let{mobileMode,toggleMobileMode}=_ref;let[isOpenedStatus,setOpenedStatus]=useState(false);let[data,setData]=useState([]);let[isNoSeenPotsLength,setNoSeenPotsLength]=useState(0);let userSeenNews=useSelector(userSelector.userSeenNews);useEffect(()=>{getNews(setData);let interval=setInterval(()=>{getNews(setData);},300000);return()=>{clearInterval(interval);};},[]);useEffect(()=>{if(data&&data.length>0&&userSeenNews){let result=data.filter((el,index)=>{if(el){let found=userSeenNews.find(item=>item===el.id);if(found){return false;}else{return true;}}});setNoSeenPotsLength(result.length);}},[data,userSeenNews]);useEffect(()=>{mobileMode&&setOpenedStatus(false);},[mobileMode]);const linkOnClickHandler=()=>{mobileMode&&toggleMobileMode(button=>!button);setOpenedStatus(status=>!status);};return/*#__PURE__*/_jsxs(\"div\",{className:`${s.notification_container} ${isOpenedStatus&&s.active}`,ref:useOutsideClick(()=>isOpenedStatus&&setOpenedStatus(false)),children:[/*#__PURE__*/_jsx(\"button\",{onClick:linkOnClickHandler,title:\"\\u0421\\u043F\\u043E\\u0432\\u0456\\u0449\\u0435\\u043D\\u043D\\u044F\",className:`${s.notification_btn} ${isNoSeenPotsLength>0&&s.red_circle}`,children:/*#__PURE__*/_jsx(\"img\",{src:bellIcon,alt:\"bell icon\"})}),/*#__PURE__*/_jsxs(\"div\",{className:s.notification_body,children:[/*#__PURE__*/_jsxs(\"p\",{className:s.body_title,children:[\"\\u0421\\u043F\\u043E\\u0432\\u0456\\u0449\\u0435\\u043D\\u043D\\u044F (\",isNoSeenPotsLength,\")\"]}),/*#__PURE__*/_jsx(\"ul\",{className:s.body_list,children:isNoSeenPotsLength>0?/*#__PURE__*/_jsxs(\"a\",{onClick:()=>setOpenedStatus(false),href:'/feed-news?filter=noviews',className:s.body_link,children:[/*#__PURE__*/_jsx(\"img\",{src:newsIcon,alt:\"\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u041D\\u0435\\u043F\\u0435\\u0440\\u0435\\u0433\\u043B\\u044F\\u043D\\u0443\\u0442\\u0456 \\u043D\\u043E\\u0432\\u0438\\u043D\\u0438 (\",isNoSeenPotsLength,\")\"]})]}):/*#__PURE__*/_jsx(\"p\",{style:{color:'#7d7d7d'},children:\"\\u041D\\u0435\\u043C\\u0430\\u0454 \\u043D\\u043E\\u0432\\u0438\\u0445 \\u0441\\u043F\\u043E\\u0432\\u0456\\u0449\\u0435\\u043D\\u044C\"})})]})]});};export default NotificationModule;","map":{"version":3,"names":["s","bellIcon","newsIcon","useEffect","useState","getNews","useSelector","userSelector","useOutsideClick","jsx","_jsx","jsxs","_jsxs","NotificationModule","_ref","mobileMode","toggleMobileMode","isOpenedStatus","setOpenedStatus","data","setData","isNoSeenPotsLength","setNoSeenPotsLength","userSeenNews","interval","setInterval","clearInterval","length","result","filter","el","index","found","find","item","id","linkOnClickHandler","button","status","className","notification_container","active","ref","children","onClick","title","notification_btn","red_circle","src","alt","notification_body","body_title","body_list","href","body_link","style","color"],"sources":["C:/Users/zhuikov/OneDrive - SOFTCOM/Desktop/web/2024/korportal/src/components/NotificationModule/NotificationModule.jsx"],"sourcesContent":["import s from './NotificationModule.module.css';\r\nimport bellIcon from '../../assets/img/icons/bell-icon.svg';\r\nimport newsIcon from '../../assets/img/icons/fi-rs-apps.svg';\r\nimport { useEffect, useState } from 'react';\r\nimport { getNews } from '../../api/api';\r\nimport { useSelector } from 'react-redux';\r\nimport { userSelector } from '../../selectors/userSelectors';\r\nimport { useOutsideClick } from '../../hooks/useOutsideClick';\r\n\r\nconst NotificationModule = ({ mobileMode, toggleMobileMode }) => {\r\n\tlet [isOpenedStatus, setOpenedStatus] = useState(false);\r\n\tlet [data, setData] = useState([]);\r\n\tlet [isNoSeenPotsLength, setNoSeenPotsLength] = useState(0);\r\n\tlet userSeenNews = useSelector(userSelector.userSeenNews);\r\n\r\n\tuseEffect(() => {\r\n\t\tgetNews(setData);\r\n\t\tlet interval = setInterval(() => {\r\n\t\t\tgetNews(setData);\r\n\t\t}, 300000);\r\n\t\treturn () => {\r\n\t\t\tclearInterval(interval);\r\n\t\t};\r\n\t}, []);\r\n\tuseEffect(() => {\r\n\t\tif (data && data.length > 0 && userSeenNews) {\r\n\t\t\tlet result = data.filter((el, index) => {\r\n\t\t\t\tif (el) {\r\n\t\t\t\t\tlet found = userSeenNews.find((item) => item === el.id);\r\n\r\n\t\t\t\t\tif (found) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tsetNoSeenPotsLength(result.length);\r\n\t\t}\r\n\t}, [data, userSeenNews]);\r\n\r\n\tuseEffect(() => {\r\n\t\tmobileMode && setOpenedStatus(false);\r\n\t}, [mobileMode]);\r\n\r\n\tconst linkOnClickHandler = () => {\r\n\t\tmobileMode && toggleMobileMode((button) => !button);\r\n\t\tsetOpenedStatus((status) => !status);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={`${s.notification_container} ${isOpenedStatus && s.active}`}\r\n\t\t\tref={useOutsideClick(() => isOpenedStatus && setOpenedStatus(false))}>\r\n\t\t\t<button onClick={linkOnClickHandler} title=\"Сповіщення\" className={`${s.notification_btn} ${isNoSeenPotsLength > 0 && s.red_circle}`}>\r\n\t\t\t\t<img src={bellIcon} alt=\"bell icon\" />\r\n\t\t\t</button>\r\n\r\n\t\t\t<div className={s.notification_body}>\r\n\t\t\t\t<p className={s.body_title}>Сповіщення ({isNoSeenPotsLength})</p>\r\n\t\t\t\t<ul className={s.body_list}>\r\n\t\t\t\t\t{isNoSeenPotsLength > 0 ? (\r\n\t\t\t\t\t\t<a onClick={() => setOpenedStatus(false)} href={'/feed-news?filter=noviews'} className={s.body_link}>\r\n\t\t\t\t\t\t\t<img src={newsIcon} alt=\"\" />\r\n\t\t\t\t\t\t\t<span>Непереглянуті новини ({isNoSeenPotsLength})</span>\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<p style={{ color: '#7d7d7d' }}>Немає нових сповіщень</p>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default NotificationModule;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}