{"ast":null,"code":"import{useEffect,useState}from'react';import s from'./FilesList.module.css';import searchIcon from'../../assets/img/icons/search-icon.svg';import Loader from'../UI/Loader/Loader';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const FilesList=_ref=>{let{data,setModalWindowStatus,setActiveSLide,isFetched}=_ref;let[isGalleryList,setGalleryList]=useState([]);let[isCurrentGalleryList,setCurrentGalleryList]=useState([]);let[isPaginationIndex,setPaginationIndex]=useState(1);let[isEndScroll,setEndScroll]=useState(0);const handleScroll=e=>{let block=e.currentTarget;// Відступ до кінця блоку\nlet y=0;if(Math.ceil(block.scrollTop+block.clientHeight)>=Math.ceil(block.scrollHeight)-y){setEndScroll(endScroll=>endScroll+1);}};useEffect(()=>{let el=document.querySelector('.main-scroll-block');el.addEventListener('scroll',e=>handleScroll(e));return()=>{el.removeEventListener('scroll',e=>handleScroll(e));};},[]);useEffect(()=>{setGalleryList(data);setPaginationIndex(1);},[data]);useEffect(()=>{if(isGalleryList&&isCurrentGalleryList&&isEndScroll>0&&isGalleryList.length>=20&&isCurrentGalleryList.length<isGalleryList.length){setPaginationIndex(index=>index+1);}},[isEndScroll]);useEffect(()=>{if(isPaginationIndex===1){if(isGalleryList&&isGalleryList.length>0){setCurrentGalleryList([...isGalleryList.slice(0,20)]);}else{setCurrentGalleryList([]);}}else{setCurrentGalleryList(array=>[...array,...isGalleryList.slice(20*(isPaginationIndex-1),20*isPaginationIndex)]);}},[isGalleryList,isPaginationIndex]);return/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:isFetched?/*#__PURE__*/_jsx(\"div\",{style:{width:'100%',height:'100px',position:'relative',marginTop:'30px'},children:/*#__PURE__*/_jsx(Loader,{background:true})}):/*#__PURE__*/_jsx(\"div\",{className:s.files,children:isCurrentGalleryList.length>0?isCurrentGalleryList.map((fileItem,fileIndex)=>fileItem&&/*#__PURE__*/_jsxs(\"div\",{className:s.files__item,children:[fileItem.file_type==='image'&&/*#__PURE__*/_jsx(\"img\",{loading:\"lazy\",className:s.file,src:fileItem.thumb,alt:\"\"}),fileItem.file_type==='video'&&/*#__PURE__*/_jsx(\"video\",{controls:true,loading:\"lazy\",className:`${s.file} ${s.video}`,src:`${fileItem.url}`,alt:\"\"}),fileItem.file_type!=='video'&&fileItem.file_type!=='image'&&/*#__PURE__*/_jsxs(\"div\",{className:`${s.file} ${s.other_type}`,children:[/*#__PURE__*/_jsx(\"span\",{children:fileItem.file_type}),/*#__PURE__*/_jsx(\"span\",{children:fileItem.url})]}),/*#__PURE__*/_jsx(\"button\",{className:s.zoom_btn,onClick:()=>{setActiveSLide(fileIndex);setModalWindowStatus(true);},children:/*#__PURE__*/_jsx(\"img\",{src:searchIcon})})]})):/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'16px',color:'#7d7d7d'},children:\"\\u041D\\u0435\\u043C\\u0430\\u0454 \\u0444\\u0430\\u0439\\u043B\\u0456\\u0432\"})})});};export default FilesList;","map":{"version":3,"names":["useEffect","useState","s","searchIcon","Loader","jsx","_jsx","jsxs","_jsxs","FilesList","_ref","data","setModalWindowStatus","setActiveSLide","isFetched","isGalleryList","setGalleryList","isCurrentGalleryList","setCurrentGalleryList","isPaginationIndex","setPaginationIndex","isEndScroll","setEndScroll","handleScroll","e","block","currentTarget","y","Math","ceil","scrollTop","clientHeight","scrollHeight","endScroll","el","document","querySelector","addEventListener","removeEventListener","length","index","slice","array","className","children","style","width","height","position","marginTop","background","files","map","fileItem","fileIndex","files__item","file_type","loading","file","src","thumb","alt","controls","video","url","other_type","zoom_btn","onClick","fontSize","color"],"sources":["C:/Users/Dmytro/Downloads/korportal-master/korportal-master/src/components/FilesList/FilesList.jsx"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport s from './FilesList.module.css';\nimport searchIcon from '../../assets/img/icons/search-icon.svg';\nimport Loader from '../UI/Loader/Loader';\n\nconst FilesList = ({ data, setModalWindowStatus, setActiveSLide, isFetched }) => {\n\tlet [isGalleryList, setGalleryList] = useState([]);\n\tlet [isCurrentGalleryList, setCurrentGalleryList] = useState([]);\n\tlet [isPaginationIndex, setPaginationIndex] = useState(1);\n\tlet [isEndScroll, setEndScroll] = useState(0);\n\n\tconst handleScroll = (e) => {\n\t\tlet block = e.currentTarget;\n\t\t// Відступ до кінця блоку\n\t\tlet y = 0;\n\t\tif (Math.ceil(block.scrollTop + block.clientHeight) >= Math.ceil(block.scrollHeight) - y) {\n\t\t\tsetEndScroll((endScroll) => endScroll + 1);\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tlet el = document.querySelector('.main-scroll-block');\n\t\tel.addEventListener('scroll', (e) => handleScroll(e));\n\t\treturn () => {\n\t\t\tel.removeEventListener('scroll', (e) => handleScroll(e));\n\t\t};\n\t}, []);\n\tuseEffect(() => {\n\t\tsetGalleryList(data);\n\t\tsetPaginationIndex(1);\n\t}, [data]);\n\tuseEffect(() => {\n\t\tif (\n\t\t\tisGalleryList &&\n\t\t\tisCurrentGalleryList &&\n\t\t\tisEndScroll > 0 &&\n\t\t\tisGalleryList.length >= 20 &&\n\t\t\tisCurrentGalleryList.length < isGalleryList.length\n\t\t) {\n\t\t\tsetPaginationIndex((index) => index + 1);\n\t\t}\n\t}, [isEndScroll]);\n\tuseEffect(() => {\n\t\tif (isPaginationIndex === 1) {\n\t\t\tif (isGalleryList && isGalleryList.length > 0) {\n\t\t\t\tsetCurrentGalleryList([...isGalleryList.slice(0, 20)]);\n\t\t\t} else {\n\t\t\t\tsetCurrentGalleryList([]);\n\t\t\t}\n\t\t} else {\n\t\t\tsetCurrentGalleryList((array) => [...array, ...isGalleryList.slice(20 * (isPaginationIndex - 1), 20 * isPaginationIndex)]);\n\t\t}\n\t}, [isGalleryList, isPaginationIndex]);\n\n\treturn (\n\t\t<div className=\"row\">\n\t\t\t{isFetched ? (\n\t\t\t\t<div style={{ width: '100%', height: '100px', position: 'relative', marginTop: '30px' }}>\n\t\t\t\t\t<Loader background={true} />\n\t\t\t\t</div>\n\t\t\t) : (\n\t\t\t\t<div className={s.files}>\n\t\t\t\t\t{isCurrentGalleryList.length > 0 ? (\n\t\t\t\t\t\tisCurrentGalleryList.map(\n\t\t\t\t\t\t\t(fileItem, fileIndex) =>\n\t\t\t\t\t\t\t\tfileItem && (\n\t\t\t\t\t\t\t\t\t<div className={s.files__item}>\n\t\t\t\t\t\t\t\t\t\t{fileItem.file_type === 'image' && <img loading=\"lazy\" className={s.file} src={fileItem.thumb} alt=\"\" />}\n\t\t\t\t\t\t\t\t\t\t{fileItem.file_type === 'video' && (\n\t\t\t\t\t\t\t\t\t\t\t<video controls loading=\"lazy\" className={`${s.file} ${s.video}`} src={`${fileItem.url}`} alt=\"\" />\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t{fileItem.file_type !== 'video' && fileItem.file_type !== 'image' && (\n\t\t\t\t\t\t\t\t\t\t\t<div className={`${s.file} ${s.other_type}`}>\n\t\t\t\t\t\t\t\t\t\t\t\t<span>{fileItem.file_type}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<span>{fileItem.url}</span>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclassName={s.zoom_btn}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tsetActiveSLide(fileIndex);\n\t\t\t\t\t\t\t\t\t\t\t\tsetModalWindowStatus(true);\n\t\t\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t\t\t<img src={searchIcon} />\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<p style={{ fontSize: '16px', color: '#7d7d7d' }}>Немає файлів</p>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport default FilesList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}