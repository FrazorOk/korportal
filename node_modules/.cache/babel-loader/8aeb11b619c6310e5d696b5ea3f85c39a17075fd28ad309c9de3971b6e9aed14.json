{"ast":null,"code":"import s from'./GalleryList.module.css';import arrowIcon from'../../../assets/img/icons/arrow-down-icon.svg';import{useEffect,useRef,useState}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const GalleryList=_ref=>{let{galleryList}=_ref;let ref=useRef();let[isGalleryList,setGalleryList]=useState([]);let[isCurrentGalleryList,setCurrentGalleryList]=useState([]);let[isPaginationIndex,setPaginationIndex]=useState(1);const handleScroll=e=>{let block=e.currentTarget;// Відступ до кінця блоку\nlet y=100;if(Math.ceil(block.scrollTop+block.clientHeight)>=Math.ceil(block.scrollHeight)-y){setPaginationIndex(index=>index+1);}};useEffect(()=>{let el=document.querySelector('.main-scroll-block');el.addEventListener('scroll',e=>handleScroll(e));return()=>{el.removeEventListener('scroll',e=>handleScroll(e));};},[]);useEffect(()=>{if(galleryList&&galleryList.length>0){setGalleryList(galleryList);}},[galleryList]);useEffect(()=>{if(isGalleryList&&isGalleryList.length>0){setCurrentGalleryList(array=>[...array,...isGalleryList.slice(20*(isPaginationIndex-1),20*isPaginationIndex)]);console.log(isGalleryList.slice(0,20));console.log(isPaginationIndex);console.log(20*(isPaginationIndex-1));console.log(20*isPaginationIndex);}},[isGalleryList,isPaginationIndex]);useEffect(()=>{console.log(isCurrentGalleryList);},[isCurrentGalleryList]);return/*#__PURE__*/_jsx(\"div\",{ref:ref,className:s.list,children:isCurrentGalleryList&&isCurrentGalleryList.length&&isCurrentGalleryList.map((galleryItem,galleryIndex)=>/*#__PURE__*/_jsxs(\"a\",{href:\"#\",className:s.item,children:[/*#__PURE__*/_jsx(\"img\",{loading:\"lazy\",src:`${galleryItem}`}),/*#__PURE__*/_jsxs(\"p\",{className:s.item_title,children:[/*#__PURE__*/_jsx(\"span\",{className:s.item_date,children:\"12 \\u043B\\u044E\\u0442\\u043E\\u0433\\u043E 2025\"}),\"\\u041D\\u0430\\u0437\\u0432\\u0430 \\u043A\\u0430\\u0442\\u0430\\u043B\\u043E\\u0433\\u0443 \\u0442\\u0430\\u043A\\u0430\"]}),/*#__PURE__*/_jsxs(\"span\",{className:s.item_btn,href:\"\",children:[\"\\u041F\\u0435\\u0440\\u0435\\u0433\\u043B\\u044F\\u043D\\u0443\\u0442\\u0438\",/*#__PURE__*/_jsx(\"img\",{src:arrowIcon,alt:\"\"})]})]},`${galleryIndex}gallery`))});};export default GalleryList;","map":{"version":3,"names":["s","arrowIcon","useEffect","useRef","useState","jsx","_jsx","jsxs","_jsxs","GalleryList","_ref","galleryList","ref","isGalleryList","setGalleryList","isCurrentGalleryList","setCurrentGalleryList","isPaginationIndex","setPaginationIndex","handleScroll","e","block","currentTarget","y","Math","ceil","scrollTop","clientHeight","scrollHeight","index","el","document","querySelector","addEventListener","removeEventListener","length","array","slice","console","log","className","list","children","map","galleryItem","galleryIndex","href","item","loading","src","item_title","item_date","item_btn","alt"],"sources":["E:/web/web/2024/korportal/src/pages/GalleryPage/GalleryList/GalleryList.jsx"],"sourcesContent":["import s from './GalleryList.module.css';\r\nimport arrowIcon from '../../../assets/img/icons/arrow-down-icon.svg';\r\nimport { useEffect, useRef, useState } from 'react';\r\n\r\nconst GalleryList = ({ galleryList }) => {\r\n\tlet ref = useRef();\r\n\tlet [isGalleryList, setGalleryList] = useState([]);\r\n\tlet [isCurrentGalleryList, setCurrentGalleryList] = useState([]);\r\n\tlet [isPaginationIndex, setPaginationIndex] = useState(1);\r\n\r\n\tconst handleScroll = (e) => {\r\n\t\tlet block = e.currentTarget;\r\n\t\t// Відступ до кінця блоку\r\n\t\tlet y = 100;\r\n\t\tif (Math.ceil(block.scrollTop + block.clientHeight) >= Math.ceil(block.scrollHeight) - y) {\r\n\t\t\tsetPaginationIndex((index) => index + 1);\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tlet el = document.querySelector('.main-scroll-block');\r\n\t\tel.addEventListener('scroll', (e) => handleScroll(e));\r\n\t\treturn () => {\r\n\t\t\tel.removeEventListener('scroll', (e) => handleScroll(e));\r\n\t\t};\r\n\t}, []);\r\n\tuseEffect(() => {\r\n\t\tif (galleryList && galleryList.length > 0) {\r\n\t\t\tsetGalleryList(galleryList);\r\n\t\t}\r\n\t}, [galleryList]);\r\n\tuseEffect(() => {\r\n\t\tif (isGalleryList && isGalleryList.length > 0) {\r\n\t\t\tsetCurrentGalleryList((array) => [...array, ...isGalleryList.slice(20 * (isPaginationIndex - 1), 20 * isPaginationIndex)]);\r\n\t\t\tconsole.log(isGalleryList.slice(0, 20));\r\n\t\t\tconsole.log(isPaginationIndex);\r\n\t\t\tconsole.log(20 * (isPaginationIndex - 1));\r\n\t\t\tconsole.log(20 * isPaginationIndex);\r\n\t\t}\r\n\t}, [isGalleryList, isPaginationIndex]);\r\n\r\n\tuseEffect(() => {\r\n\t\tconsole.log(isCurrentGalleryList);\r\n\t}, [isCurrentGalleryList]);\r\n\r\n\treturn (\r\n\t\t<div ref={ref} className={s.list}>\r\n\t\t\t{isCurrentGalleryList &&\r\n\t\t\t\tisCurrentGalleryList.length &&\r\n\t\t\t\tisCurrentGalleryList.map((galleryItem, galleryIndex) => (\r\n\t\t\t\t\t<a href=\"#\" className={s.item} key={`${galleryIndex}gallery`}>\r\n\t\t\t\t\t\t<img loading=\"lazy\" src={`${galleryItem}`} />\r\n\t\t\t\t\t\t<p className={s.item_title}>\r\n\t\t\t\t\t\t\t<span className={s.item_date}>12 лютого 2025</span>\r\n\t\t\t\t\t\t\tНазва каталогу така\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<span className={s.item_btn} href=\"\">\r\n\t\t\t\t\t\t\tПереглянути\r\n\t\t\t\t\t\t\t<img src={arrowIcon} alt=\"\" />\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t))}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default GalleryList;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}