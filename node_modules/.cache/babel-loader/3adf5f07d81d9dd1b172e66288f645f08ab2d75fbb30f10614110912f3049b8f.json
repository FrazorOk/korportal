{"ast":null,"code":"import{memo,useEffect,useRef,useState}from'react';import VivoChatSection from'../../components/VivoChatSection/VivoChatSection';import PlannedNewsSection from'./PlannedNewsSection/PlannedNewsSection';import AddNewPostSection from'./AddNewPostSection/AddNewPostSection';import{useRedirectAdmin}from'../../hooks/useRedirectHook';import{useScrollToTop}from'../../hooks/scrollToTop';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const AdminNewsPage=()=>{let{statusAdmin}=useRedirectAdmin();let ref=useRef();let ref2=useRef();let ref3=useRef();const[width,setwidth]=useState(0);const[scroll,setScroll]=useState(0);const[windowHeight,setWindowHeight]=useState(null);const[statusStiky,setStatusStiky]=useState(false);const[stikuNeeded,setStikuNeeded]=useState(false);useScrollToTop();const handleScroll=sizeWindow=>{if(ref3.current){if(ref3.current.getBoundingClientRect().height>ref2.current.getBoundingClientRect().height){setStikuNeeded(false);}else{setStikuNeeded(true);let heightWindows=ref3.current.getBoundingClientRect();if(ref3.current&&ref.current&&sizeWindow<heightWindows.height+130){setStatusStiky(true);setScroll(ref.current.getBoundingClientRect().top+ref3.current.getBoundingClientRect().height-sizeWindow+30);}else{setStatusStiky(false);setScroll(ref.current.getBoundingClientRect().top-95);}}}};useEffect(()=>{if(statusAdmin){const observer=new ResizeObserver(entries=>{setwidth(entries[0].contentRect.width/2-15);setWindowHeight(window.innerHeight);});observer.observe(ref.current);return()=>{ref.current&&observer.unobserve(ref.current);};}},[statusAdmin]);useEffect(()=>{if(statusAdmin){if(windowHeight){let el=document.querySelector('.main-scroll-block');el.addEventListener('scroll',e=>handleScroll(window.innerHeight));return()=>{window.removeEventListener('scroll',e=>handleScroll(window.innerHeight));};}}},[windowHeight,statusAdmin]);return/*#__PURE__*/_jsx(_Fragment,{children:statusAdmin&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u041D\\u0430\\u043B\\u0430\\u0448\\u0442\\u0443\\u0432\\u0430\\u043D\\u043D\\u044F \\u0441\\u0442\\u0440\\u0456\\u0447\\u043A\\u0438 \\u043E\\u0441\\u0442\\u0430\\u043D\\u043D\\u0456\\u0445 \\u043D\\u043E\\u0432\\u0438\\u043D\"}),/*#__PURE__*/_jsxs(\"div\",{ref:ref,style:{marginTop:'30px'},className:\"row end\",children:[/*#__PURE__*/_jsxs(\"div\",{ref:ref3,style:{width:width},className:`column-50 ${stikuNeeded&&scroll<0&&'sticky-position'} ${stikuNeeded&&statusStiky&&'sticky-position__bottom'}`,children:[/*#__PURE__*/_jsx(AddNewPostSection,{}),/*#__PURE__*/_jsx(PlannedNewsSection,{})]}),/*#__PURE__*/_jsx(VivoChatSection,{adminStatus:true,ref1:ref2,title:true,fullScreen:false})]})]})});};export default/*#__PURE__*/memo(AdminNewsPage);","map":{"version":3,"names":["memo","useEffect","useRef","useState","VivoChatSection","PlannedNewsSection","AddNewPostSection","useRedirectAdmin","useScrollToTop","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AdminNewsPage","statusAdmin","ref","ref2","ref3","width","setwidth","scroll","setScroll","windowHeight","setWindowHeight","statusStiky","setStatusStiky","stikuNeeded","setStikuNeeded","handleScroll","sizeWindow","current","getBoundingClientRect","height","heightWindows","top","observer","ResizeObserver","entries","contentRect","window","innerHeight","observe","unobserve","el","document","querySelector","addEventListener","e","removeEventListener","children","style","marginTop","className","adminStatus","ref1","title","fullScreen"],"sources":["E:/web/web/2024/korportal/src/pages/AdminNewsPage/AdminNewsPage.jsx"],"sourcesContent":["import { memo, useEffect, useRef, useState } from 'react';\r\nimport VivoChatSection from '../../components/VivoChatSection/VivoChatSection';\r\nimport PlannedNewsSection from './PlannedNewsSection/PlannedNewsSection';\r\nimport AddNewPostSection from './AddNewPostSection/AddNewPostSection';\r\nimport { useRedirectAdmin } from '../../hooks/useRedirectHook';\r\nimport { useScrollToTop } from '../../hooks/scrollToTop';\r\n\r\nconst AdminNewsPage = () => {\r\n\tlet { statusAdmin } = useRedirectAdmin();\r\n\r\n\tlet ref = useRef();\r\n\tlet ref2 = useRef();\r\n\tlet ref3 = useRef();\r\n\r\n\tconst [width, setwidth] = useState(0);\r\n\tconst [scroll, setScroll] = useState(0);\r\n\tconst [windowHeight, setWindowHeight] = useState(null);\r\n\tconst [statusStiky, setStatusStiky] = useState(false);\r\n\tconst [stikuNeeded, setStikuNeeded] = useState(false);\r\n\r\n\tuseScrollToTop();\r\n\r\n\tconst handleScroll = (sizeWindow) => {\r\n\t\tif (ref3.current) {\r\n\t\t\tif (ref3.current.getBoundingClientRect().height > ref2.current.getBoundingClientRect().height) {\r\n\t\t\t\tsetStikuNeeded(false);\r\n\t\t\t} else {\r\n\t\t\t\tsetStikuNeeded(true);\r\n\t\t\t\tlet heightWindows = ref3.current.getBoundingClientRect();\r\n\r\n\t\t\t\tif (ref3.current && ref.current && sizeWindow < heightWindows.height + 130) {\r\n\t\t\t\t\tsetStatusStiky(true);\r\n\t\t\t\t\tsetScroll(ref.current.getBoundingClientRect().top + ref3.current.getBoundingClientRect().height - sizeWindow + 30);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetStatusStiky(false);\r\n\t\t\t\t\tsetScroll(ref.current.getBoundingClientRect().top - 95);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tif (statusAdmin) {\r\n\t\t\tconst observer = new ResizeObserver((entries) => {\r\n\t\t\t\tsetwidth(entries[0].contentRect.width / 2 - 15);\r\n\t\t\t\tsetWindowHeight(window.innerHeight);\r\n\t\t\t});\r\n\t\t\tobserver.observe(ref.current);\r\n\t\t\treturn () => {\r\n\t\t\t\tref.current && observer.unobserve(ref.current);\r\n\t\t\t};\r\n\t\t}\r\n\t}, [statusAdmin]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (statusAdmin) {\r\n\t\t\tif (windowHeight) {\r\n\t\t\t\tlet el = document.querySelector('.main-scroll-block');\r\n\t\t\t\tel.addEventListener('scroll', (e) => handleScroll(window.innerHeight));\r\n\t\t\t\treturn () => {\r\n\t\t\t\t\twindow.removeEventListener('scroll', (e) => handleScroll(window.innerHeight));\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t}, [windowHeight, statusAdmin]);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{statusAdmin && (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<h1>Налаштування стрічки останніх новин</h1>\r\n\r\n\t\t\t\t\t<div ref={ref} style={{ marginTop: '30px' }} className=\"row end\">\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tref={ref3}\r\n\t\t\t\t\t\t\tstyle={{ width: width }}\r\n\t\t\t\t\t\t\tclassName={`column-50 ${stikuNeeded && scroll < 0 && 'sticky-position'} ${\r\n\t\t\t\t\t\t\t\tstikuNeeded && statusStiky && 'sticky-position__bottom'\r\n\t\t\t\t\t\t\t}`}>\r\n\t\t\t\t\t\t\t<AddNewPostSection />\r\n\t\t\t\t\t\t\t<PlannedNewsSection />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<VivoChatSection adminStatus={true} ref1={ref2} title={true} fullScreen={false} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default memo(AdminNewsPage);\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}