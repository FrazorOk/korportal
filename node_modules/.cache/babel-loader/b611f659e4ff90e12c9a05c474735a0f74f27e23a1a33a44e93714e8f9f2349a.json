{"ast":null,"code":"import{useEffect,useState}from'react';import HolidayCalendarItem from'../HolidayCalendarItem/HolidayCalendarItem';import AddEventButton from'../UI/AddEventButton/AddEventButton';import s from'./HolidayCalendarList.module.css';import{getNews}from'../../api/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const dateToYMD=(date,year)=>{let d=date.getDate();let m=date.getMonth()+1;return new Date(''+year+'-'+(m<=9?'0'+m:m)+'-'+(d<=9?'0'+d:d));};const dateToYMDArray=(date,year)=>{let d=date.slice(8,10);let m=date.slice(5,7);return new Date(''+year+'-'+m+'-'+d);};let array=[1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9];let colors=['#6a5fff','#07b3ee','#5182fe','#ff888a','#5da15d'];const HolidayCalendarList=()=>{let[data,setData]=useState(null);let[formatedData,setFormatedData]=useState(null);useEffect(()=>{getNews(setData,1,2);},[]);useEffect(()=>{if(data&&data.length>1){// Константи для дат\nlet year=new Date().getFullYear();let nulledDay=new Date(`${year}-01-01`);let today=new Date();// сегодня\n// Створення індексу сортування та дат (для додавання у календар)\nlet filteredArrayFromNull=data.filter(item=>item&&true);let filteredArray=filteredArrayFromNull.map(item=>{if(item){// днів до сьогодні\nlet daysToday=Math.ceil(Math.abs(dateToYMD(today,year).getTime()-nulledDay.getTime())/(1000*3600*24));let allDaysInYear=Math.ceil(Math.abs(new Date(`${year}-12-31`).getTime()-nulledDay.getTime())/(1000*3600*24));let daysA=Math.ceil(Math.abs(dateToYMDArray(item.pub_date,year).getTime()-nulledDay.getTime())/(1000*3600*24));// date for calendar ms\nconst dayMilliseconds=24*60*60*1000;if(daysA-daysToday<0){// date for calendar ms\nlet dateInSeconds=dateToYMDArray(item.pub_date,year*1+1).setTime(dateToYMDArray(item.pub_date,year*1+1).getTime()-dayMilliseconds);let dateForCalendarBefor=encodeURI(new Date(dateInSeconds).toISOString()).slice(0,10);let dateForCalendarAfter=encodeURI(dateToYMDArray(item.pub_date,year*1+1).toISOString()).slice(0,10);return{...item,index:allDaysInYear+1+daysA-daysToday,dateForCalendar:{befor:dateForCalendarBefor,after:dateForCalendarAfter}};}// date for calendar ms\nlet dateInSeconds=dateToYMDArray(item.pub_date,year).setTime(dateToYMDArray(item.pub_date,year).getTime()-dayMilliseconds);let dateForCalendarBefor=encodeURI(new Date(dateInSeconds).toISOString()).slice(0,10);let dateForCalendarAfter=encodeURI(dateToYMDArray(item.pub_date,year).toISOString()).slice(0,10);return{...item,index:daysA-daysToday,dateForCalendar:{befor:dateForCalendarBefor,after:dateForCalendarAfter}};}else{return null;}});filteredArray.sort((a,b)=>a.index-b.index);setFormatedData(filteredArray);}},[data]);return/*#__PURE__*/_jsxs(\"div\",{className:s.list,children:[/*#__PURE__*/_jsx(\"div\",{title:\"\\u0421\\u0442\\u0432\\u043E\\u0440\\u0438\\u0442\\u0438 \\u043D\\u043E\\u0432\\u0443 \\u0441\\u0432\\u044F\\u0442\\u043A\\u043E\\u0432\\u0443 \\u0434\\u0430\\u0442\\u0443\",className:s.add_button,children:/*#__PURE__*/_jsx(AddEventButton,{path:'add-change-holiday-calendar'})}),formatedData&&formatedData.length>0&&formatedData.map((eventDate,index)=>{let step=index*1/colors.length;if(eventDate){return/*#__PURE__*/_jsx(HolidayCalendarItem,{data:eventDate,adminStatus:true,allLink:false,color:index==0?colors[0]:colors[index*1-Math.floor(step)*colors.length]});}})]});};export default HolidayCalendarList;","map":{"version":3,"names":["useEffect","useState","HolidayCalendarItem","AddEventButton","s","getNews","jsx","_jsx","jsxs","_jsxs","dateToYMD","date","year","d","getDate","m","getMonth","Date","dateToYMDArray","slice","array","colors","HolidayCalendarList","data","setData","formatedData","setFormatedData","length","getFullYear","nulledDay","today","filteredArrayFromNull","filter","item","filteredArray","map","daysToday","Math","ceil","abs","getTime","allDaysInYear","daysA","pub_date","dayMilliseconds","dateInSeconds","setTime","dateForCalendarBefor","encodeURI","toISOString","dateForCalendarAfter","index","dateForCalendar","befor","after","sort","a","b","className","list","children","title","add_button","path","eventDate","step","adminStatus","allLink","color","floor"],"sources":["C:/Users/zhuikov/OneDrive - SOFTCOM/Desktop/web/2024/korportal/src/components/HolidayCalendarList/HolidayCalendarList.jsx"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport HolidayCalendarItem from '../HolidayCalendarItem/HolidayCalendarItem';\r\nimport AddEventButton from '../UI/AddEventButton/AddEventButton';\r\nimport s from './HolidayCalendarList.module.css';\r\nimport { getNews } from '../../api/api';\r\n\r\nconst dateToYMD = (date, year) => {\r\n\tlet d = date.getDate();\r\n\tlet m = date.getMonth() + 1;\r\n\treturn new Date('' + year + '-' + (m <= 9 ? '0' + m : m) + '-' + (d <= 9 ? '0' + d : d));\r\n};\r\nconst dateToYMDArray = (date, year) => {\r\n\tlet d = date.slice(8, 10);\r\n\tlet m = date.slice(5, 7);\r\n\treturn new Date('' + year + '-' + m + '-' + d);\r\n};\r\n\r\nlet array = [1, 2, 3, 4, 5, 6, 7, 8, 9, 1, 2, 3, 4, 5, 6, 7, 8, 9];\r\nlet colors = ['#6a5fff', '#07b3ee', '#5182fe', '#ff888a', '#5da15d'];\r\n\r\nconst HolidayCalendarList = () => {\r\n\tlet [data, setData] = useState(null);\r\n\tlet [formatedData, setFormatedData] = useState(null);\r\n\r\n\tuseEffect(() => {\r\n\t\tgetNews(setData, 1, 2);\r\n\t}, []);\r\n\tuseEffect(() => {\r\n\t\tif (data && data.length > 1) {\r\n\t\t\t// Константи для дат\r\n\t\t\tlet year = new Date().getFullYear();\r\n\t\t\tlet nulledDay = new Date(`${year}-01-01`);\r\n\t\t\tlet today = new Date(); // сегодня\r\n\r\n\t\t\t// Створення індексу сортування та дат (для додавання у календар)\r\n\t\t\tlet filteredArrayFromNull = data.filter((item) => item && true);\r\n\r\n\t\t\tlet filteredArray = filteredArrayFromNull.map((item) => {\r\n\t\t\t\tif (item) {\r\n\t\t\t\t\t// днів до сьогодні\r\n\t\t\t\t\tlet daysToday = Math.ceil(Math.abs(dateToYMD(today, year).getTime() - nulledDay.getTime()) / (1000 * 3600 * 24));\r\n\t\t\t\t\tlet allDaysInYear = Math.ceil(Math.abs(new Date(`${year}-12-31`).getTime() - nulledDay.getTime()) / (1000 * 3600 * 24));\r\n\t\t\t\t\tlet daysA = Math.ceil(Math.abs(dateToYMDArray(item.pub_date, year).getTime() - nulledDay.getTime()) / (1000 * 3600 * 24));\r\n\r\n\t\t\t\t\t// date for calendar ms\r\n\t\t\t\t\tconst dayMilliseconds = 24 * 60 * 60 * 1000;\r\n\r\n\t\t\t\t\tif (daysA - daysToday < 0) {\r\n\t\t\t\t\t\t// date for calendar ms\r\n\t\t\t\t\t\tlet dateInSeconds = dateToYMDArray(item.pub_date, year * 1 + 1).setTime(\r\n\t\t\t\t\t\t\tdateToYMDArray(item.pub_date, year * 1 + 1).getTime() - dayMilliseconds\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tlet dateForCalendarBefor = encodeURI(new Date(dateInSeconds).toISOString()).slice(0, 10);\r\n\t\t\t\t\t\tlet dateForCalendarAfter = encodeURI(dateToYMDArray(item.pub_date, year * 1 + 1).toISOString()).slice(0, 10);\r\n\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t...item,\r\n\t\t\t\t\t\t\tindex: allDaysInYear + 1 + daysA - daysToday,\r\n\t\t\t\t\t\t\tdateForCalendar: { befor: dateForCalendarBefor, after: dateForCalendarAfter },\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// date for calendar ms\r\n\t\t\t\t\tlet dateInSeconds = dateToYMDArray(item.pub_date, year).setTime(dateToYMDArray(item.pub_date, year).getTime() - dayMilliseconds);\r\n\r\n\t\t\t\t\tlet dateForCalendarBefor = encodeURI(new Date(dateInSeconds).toISOString()).slice(0, 10);\r\n\t\t\t\t\tlet dateForCalendarAfter = encodeURI(dateToYMDArray(item.pub_date, year).toISOString()).slice(0, 10);\r\n\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\t...item,\r\n\t\t\t\t\t\tindex: daysA - daysToday,\r\n\t\t\t\t\t\tdateForCalendar: { befor: dateForCalendarBefor, after: dateForCalendarAfter },\r\n\t\t\t\t\t};\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tfilteredArray.sort((a, b) => a.index - b.index);\r\n\r\n\t\t\tsetFormatedData(filteredArray);\r\n\t\t}\r\n\t}, [data]);\r\n\r\n\treturn (\r\n\t\t<div className={s.list}>\r\n\t\t\t<div title=\"Створити нову святкову дату\" className={s.add_button}>\r\n\t\t\t\t<AddEventButton path={'add-change-holiday-calendar'} />\r\n\t\t\t</div>\r\n\t\t\t{formatedData &&\r\n\t\t\t\tformatedData.length > 0 &&\r\n\t\t\t\tformatedData.map((eventDate, index) => {\r\n\t\t\t\t\tlet step = (index * 1) / colors.length;\r\n\r\n\t\t\t\t\tif (eventDate) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<HolidayCalendarItem\r\n\t\t\t\t\t\t\t\tdata={eventDate}\r\n\t\t\t\t\t\t\t\tadminStatus={true}\r\n\t\t\t\t\t\t\t\tallLink={false}\r\n\t\t\t\t\t\t\t\tcolor={index == 0 ? colors[0] : colors[index * 1 - Math.floor(step) * colors.length]}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t})}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default HolidayCalendarList;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}