{"ast":null,"code":"import{memo,useEffect,useState}from'react';import s from'./NewsList.module.css';import NewsItem from'../NewsItem/NewsItem';import{jsx as _jsx}from\"react/jsx-runtime\";const toDay=new Date().toJSON().slice(0,10);const NewsList=_ref=>{let{data,setTags,filterParams,setTodayPosts}=_ref;let[news,setNews]=useState([]);let[visibleNews,setVisibleNews]=useState([]);const getTodayPostsLength=()=>{return news.filter((el,index)=>index<data.length-1&&el.pub_date.slice(0,10)===toDay);};const getUniqueTags=arr=>{if(arr){let concatedArray=[];arr.forEach((element,index)=>{if(index!==arr.length-1&&element.tags){concatedArray=[...concatedArray,...element.tags];}});let uniqueTags=[...new Set(concatedArray)];return uniqueTags;}};const getFilteredNews=()=>{let serchedArray=[];if(filterParams.tags){let filteredArray=news.filter((el,index)=>{if(index<data.length-1&&el.tags){let statusTags=false;el.tags.forEach(item=>{if(filterParams.params===item){statusTags=true;}else{statusTags=false;}});if(statusTags){serchedArray=[...serchedArray,el];}}});return serchedArray=[...serchedArray,null];}else{if(filterParams.params==='Усі'){return news;}if(filterParams.params==='Сьогодні'){let filteredArray=getTodayPostsLength();return filteredArray=[...filteredArray,null];}if(filterParams.params==='Популярне'){let currentArray=news.map((el,index)=>{if(index!==news.length-1){return el;}});currentArray.pop();function compare(a,b){let aReactions=0;let aComments=0;let bReactions=0;let bComments=0;if(a.reaction){aReactions=a.reaction.length;}if(a.comment){aComments=a.comment.length;}if(b.reaction){bReactions=b.reaction.length;}if(b.comment){bComments=b.comment.length;}if(aReactions*1+aComments*1<bReactions*1+bComments*1){return 1;}if(aReactions*1+aComments*1>bReactions*1+bComments*1){return-1;}return 0;}let filteredArray=currentArray.sort(compare);return filteredArray=[...filteredArray,null];}}};useEffect(()=>{setNews(data);setTags(getUniqueTags(data));},[data]);useEffect(()=>{setTodayPosts(getTodayPostsLength().length);setVisibleNews(getFilteredNews());},[news,filterParams]);useEffect(()=>{console.log(visibleNews);},[visibleNews]);return/*#__PURE__*/_jsx(\"div\",{className:s.news_container,children:/*#__PURE__*/_jsx(\"div\",{className:s.news,children:visibleNews?visibleNews.map((item,index)=>{if(index<visibleNews.length-1&&visibleNews.length>0){return/*#__PURE__*/_jsx(NewsItem,{item:item},index);}}):/*#__PURE__*/_jsx(\"p\",{children:\"\\u041D\\u0456\\u0447\\u043E\\u0433\\u043E \\u043D\\u0435 \\u0437\\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u043E\"})})});};export default/*#__PURE__*/memo(NewsList);","map":{"version":3,"names":["memo","useEffect","useState","s","NewsItem","jsx","_jsx","toDay","Date","toJSON","slice","NewsList","_ref","data","setTags","filterParams","setTodayPosts","news","setNews","visibleNews","setVisibleNews","getTodayPostsLength","filter","el","index","length","pub_date","getUniqueTags","arr","concatedArray","forEach","element","tags","uniqueTags","Set","getFilteredNews","serchedArray","filteredArray","statusTags","item","params","currentArray","map","pop","compare","a","b","aReactions","aComments","bReactions","bComments","reaction","comment","sort","console","log","className","news_container","children"],"sources":["E:/web/web/2024/korportal/src/components/NewsList/NewsList.jsx"],"sourcesContent":["import { memo, useEffect, useState } from 'react';\r\nimport s from './NewsList.module.css';\r\nimport NewsItem from '../NewsItem/NewsItem';\r\n\r\nconst toDay = new Date().toJSON().slice(0, 10);\r\n\r\nconst NewsList = ({ data, setTags, filterParams, setTodayPosts }) => {\r\n\tlet [news, setNews] = useState([]);\r\n\tlet [visibleNews, setVisibleNews] = useState([]);\r\n\r\n\tconst getTodayPostsLength = () => {\r\n\t\treturn news.filter((el, index) => index < data.length - 1 && el.pub_date.slice(0, 10) === toDay);\r\n\t};\r\n\tconst getUniqueTags = (arr) => {\r\n\t\tif (arr) {\r\n\t\t\tlet concatedArray = [];\r\n\r\n\t\t\tarr.forEach((element, index) => {\r\n\t\t\t\tif (index !== arr.length - 1 && element.tags) {\r\n\t\t\t\t\tconcatedArray = [...concatedArray, ...element.tags];\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tlet uniqueTags = [...new Set(concatedArray)];\r\n\r\n\t\t\treturn uniqueTags;\r\n\t\t}\r\n\t};\r\n\tconst getFilteredNews = () => {\r\n\t\tlet serchedArray = [];\r\n\t\tif (filterParams.tags) {\r\n\t\t\tlet filteredArray = news.filter((el, index) => {\r\n\t\t\t\tif (index < data.length - 1 && el.tags) {\r\n\t\t\t\t\tlet statusTags = false;\r\n\r\n\t\t\t\t\tel.tags.forEach((item) => {\r\n\t\t\t\t\t\tif (filterParams.params === item) {\r\n\t\t\t\t\t\t\tstatusTags = true;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tstatusTags = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif (statusTags) {\r\n\t\t\t\t\t\tserchedArray = [...serchedArray, el];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn (serchedArray = [...serchedArray, null]);\r\n\t\t} else {\r\n\t\t\tif (filterParams.params === 'Усі') {\r\n\t\t\t\treturn news;\r\n\t\t\t}\r\n\t\t\tif (filterParams.params === 'Сьогодні') {\r\n\t\t\t\tlet filteredArray = getTodayPostsLength();\r\n\t\t\t\treturn (filteredArray = [...filteredArray, null]);\r\n\t\t\t}\r\n\t\t\tif (filterParams.params === 'Популярне') {\r\n\t\t\t\tlet currentArray = news.map((el, index) => {\r\n\t\t\t\t\tif (index !== news.length - 1) {\r\n\t\t\t\t\t\treturn el;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tcurrentArray.pop();\r\n\r\n\t\t\t\tfunction compare(a, b) {\r\n\t\t\t\t\tlet aReactions = 0;\r\n\t\t\t\t\tlet aComments = 0;\r\n\t\t\t\t\tlet bReactions = 0;\r\n\t\t\t\t\tlet bComments = 0;\r\n\r\n\t\t\t\t\tif (a.reaction) {\r\n\t\t\t\t\t\taReactions = a.reaction.length;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (a.comment) {\r\n\t\t\t\t\t\taComments = a.comment.length;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (b.reaction) {\r\n\t\t\t\t\t\tbReactions = b.reaction.length;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (b.comment) {\r\n\t\t\t\t\t\tbComments = b.comment.length;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (aReactions * 1 + aComments * 1 < bReactions * 1 + bComments * 1) {\r\n\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (aReactions * 1 + aComments * 1 > bReactions * 1 + bComments * 1) {\r\n\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\t\t\t\tlet filteredArray = currentArray.sort(compare);\r\n\r\n\t\t\t\treturn (filteredArray = [...filteredArray, null]);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tsetNews(data);\r\n\t\tsetTags(getUniqueTags(data));\r\n\t}, [data]);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetTodayPosts(getTodayPostsLength().length);\r\n\t\tsetVisibleNews(getFilteredNews());\r\n\t}, [news, filterParams]);\r\n\tuseEffect(() => {\r\n\t\tconsole.log(visibleNews);\r\n\t}, [visibleNews]);\r\n\r\n\treturn (\r\n\t\t<div className={s.news_container}>\r\n\t\t\t<div className={s.news}>\r\n\t\t\t\t{visibleNews ? (\r\n\t\t\t\t\tvisibleNews.map((item, index) => {\r\n\t\t\t\t\t\tif (index < visibleNews.length - 1 && visibleNews.length > 0) {\r\n\t\t\t\t\t\t\treturn <NewsItem item={item} key={index} />;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<p>Нічого не знайдено</p>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default memo(NewsList);\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}