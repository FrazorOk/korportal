{"ast":null,"code":"var _jsxFileName = \"E:\\\\WEB\\\\korportal-master\\\\src\\\\components\\\\GalleryList\\\\GalleryList.jsx\",\n  _s = $RefreshSig$();\nimport s from './GalleryList.module.css';\nimport arrowIcon from '../../assets/img/icons/arrow-down-icon.svg';\nimport clockIcon from '../../assets/img/icons/clock-icon.svg';\nimport { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport EditAdminButton from '../UI/EditAdminButton/EditAdminButton';\nimport { reversDateWithoutTime } from '../../helpers/dateConverter';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst GalleryList = ({\n  galleryList,\n  adminStatus = false\n}) => {\n  _s();\n  let [isGalleryList, setGalleryList] = useState([]);\n  let [isCurrentGalleryList, setCurrentGalleryList] = useState([]);\n  let [isPaginationIndex, setPaginationIndex] = useState(1);\n  let [isEndScroll, setEndScroll] = useState(0);\n  const handleScroll = e => {\n    let block = e.currentTarget;\n    // Відступ до кінця блоку\n    let y = 0;\n    if (Math.ceil(block.scrollTop + block.clientHeight) >= Math.ceil(block.scrollHeight) - y) {\n      setEndScroll(endScroll => endScroll + 1);\n    }\n  };\n  useEffect(() => {\n    let el = document.querySelector('.main-scroll-block');\n    el.addEventListener('scroll', e => handleScroll(e));\n    return () => {\n      el.removeEventListener('scroll', e => handleScroll(e));\n    };\n  }, []);\n  useEffect(() => {\n    setPaginationIndex(1);\n    setTimeout(() => setCurrentGalleryList([]));\n    setTimeout(() => setGalleryList(galleryList), 2);\n  }, [galleryList]);\n  useEffect(() => {\n    if (isEndScroll > 0 && isGalleryList.length >= 20 && isCurrentGalleryList.length < isGalleryList.length) {\n      setPaginationIndex(index => index + 1);\n    }\n  }, [isEndScroll]);\n  useEffect(() => {\n    if (isGalleryList && isGalleryList.length > 0) {\n      setCurrentGalleryList(array => [...array, ...isGalleryList.slice(20 * (isPaginationIndex - 1), 20 * isPaginationIndex)]);\n    }\n  }, [isGalleryList, isPaginationIndex]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: s.list,\n    children: isCurrentGalleryList && isCurrentGalleryList.length > 0 ? isCurrentGalleryList.map((galleryItem, galleryIndex) => galleryItem && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [isCurrentGalleryList[galleryIndex - 1] && galleryItem.create_date.slice(0, 4) !== isCurrentGalleryList[galleryIndex - 1].create_date.slice(0, 4) && /*#__PURE__*/_jsxDEV(\"h3\", {\n        className: s.date_title,\n        children: galleryItem.create_date.slice(0, 4)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 11\n      }, this), galleryIndex === 0 && /*#__PURE__*/_jsxDEV(\"h3\", {\n        className: `${s.date_title} ${s.first}`,\n        children: galleryItem.create_date.slice(0, 4)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 32\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: `/gallery/${galleryItem.id}`,\n        className: s.item,\n        children: [galleryItem.thumb && /*#__PURE__*/_jsxDEV(\"img\", {\n          className: s.main_img,\n          src: `${galleryItem.thumb}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 32\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: s.item_title,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: s.item_date,\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: clockIcon,\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 12\n            }, this), \" \", reversDateWithoutTime(galleryItem.create_date)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 11\n          }, this), galleryItem.title]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 10\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: s.item_btn,\n          href: \"\",\n          children: [\"\\u041F\\u0435\\u0440\\u0435\\u0433\\u043B\\u044F\\u043D\\u0443\\u0442\\u0438\", /*#__PURE__*/_jsxDEV(\"img\", {\n            src: arrowIcon,\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 10\n        }, this), adminStatus && /*#__PURE__*/_jsxDEV(EditAdminButton, {\n          link: `add-change-gallery/${galleryItem.id}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 26\n        }, this)]\n      }, `${galleryItem.id}gallery`, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true)) : /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        fontSize: '16px',\n        color: '#7d7d7d'\n      },\n      children: \"\\u041D\\u0435\\u043C\\u0430\\u0454 \\u0444\\u0430\\u0439\\u043B\\u0456\\u0432\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 3\n  }, this);\n};\n_s(GalleryList, \"m52HTXkMvmthTZe5luRHV99HpMg=\");\n_c = GalleryList;\nexport default GalleryList;\nvar _c;\n$RefreshReg$(_c, \"GalleryList\");","map":{"version":3,"names":["s","arrowIcon","clockIcon","useEffect","useState","Link","EditAdminButton","reversDateWithoutTime","jsxDEV","_jsxDEV","Fragment","_Fragment","GalleryList","galleryList","adminStatus","_s","isGalleryList","setGalleryList","isCurrentGalleryList","setCurrentGalleryList","isPaginationIndex","setPaginationIndex","isEndScroll","setEndScroll","handleScroll","e","block","currentTarget","y","Math","ceil","scrollTop","clientHeight","scrollHeight","endScroll","el","document","querySelector","addEventListener","removeEventListener","setTimeout","length","index","array","slice","className","list","children","map","galleryItem","galleryIndex","create_date","date_title","fileName","_jsxFileName","lineNumber","columnNumber","first","to","id","item","thumb","main_img","src","item_title","item_date","alt","title","item_btn","href","link","style","fontSize","color","_c","$RefreshReg$"],"sources":["E:/WEB/korportal-master/src/components/GalleryList/GalleryList.jsx"],"sourcesContent":["import s from './GalleryList.module.css';\r\nimport arrowIcon from '../../assets/img/icons/arrow-down-icon.svg';\r\nimport clockIcon from '../../assets/img/icons/clock-icon.svg';\r\nimport { useEffect, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport EditAdminButton from '../UI/EditAdminButton/EditAdminButton';\r\nimport { reversDateWithoutTime } from '../../helpers/dateConverter';\r\n\r\nconst GalleryList = ({ galleryList, adminStatus = false }) => {\r\n\tlet [isGalleryList, setGalleryList] = useState([]);\r\n\tlet [isCurrentGalleryList, setCurrentGalleryList] = useState([]);\r\n\tlet [isPaginationIndex, setPaginationIndex] = useState(1);\r\n\tlet [isEndScroll, setEndScroll] = useState(0);\r\n\r\n\tconst handleScroll = (e) => {\r\n\t\tlet block = e.currentTarget;\r\n\t\t// Відступ до кінця блоку\r\n\t\tlet y = 0;\r\n\t\tif (Math.ceil(block.scrollTop + block.clientHeight) >= Math.ceil(block.scrollHeight) - y) {\r\n\t\t\tsetEndScroll((endScroll) => endScroll + 1);\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tlet el = document.querySelector('.main-scroll-block');\r\n\t\tel.addEventListener('scroll', (e) => handleScroll(e));\r\n\t\treturn () => {\r\n\t\t\tel.removeEventListener('scroll', (e) => handleScroll(e));\r\n\t\t};\r\n\t}, []);\r\n\tuseEffect(() => {\r\n\t\tsetPaginationIndex(1);\r\n\t\tsetTimeout(() => setCurrentGalleryList([]));\r\n\t\tsetTimeout(() => setGalleryList(galleryList), 2);\r\n\t}, [galleryList]);\r\n\tuseEffect(() => {\r\n\t\tif (isEndScroll > 0 && isGalleryList.length >= 20 && isCurrentGalleryList.length < isGalleryList.length) {\r\n\t\t\tsetPaginationIndex((index) => index + 1);\r\n\t\t}\r\n\t}, [isEndScroll]);\r\n\tuseEffect(() => {\r\n\t\tif (isGalleryList && isGalleryList.length > 0) {\r\n\t\t\tsetCurrentGalleryList((array) => [...array, ...isGalleryList.slice(20 * (isPaginationIndex - 1), 20 * isPaginationIndex)]);\r\n\t\t}\r\n\t}, [isGalleryList, isPaginationIndex]);\r\n\r\n\treturn (\r\n\t\t<div className={s.list}>\r\n\t\t\t{isCurrentGalleryList && isCurrentGalleryList.length > 0 ? (\r\n\t\t\t\tisCurrentGalleryList.map(\r\n\t\t\t\t\t(galleryItem, galleryIndex) =>\r\n\t\t\t\t\t\tgalleryItem && (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t{isCurrentGalleryList[galleryIndex - 1] &&\r\n\t\t\t\t\t\t\t\t\tgalleryItem.create_date.slice(0, 4) !== isCurrentGalleryList[galleryIndex - 1].create_date.slice(0, 4) && (\r\n\t\t\t\t\t\t\t\t\t\t<h3 className={s.date_title}>{galleryItem.create_date.slice(0, 4)}</h3>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t{galleryIndex === 0 && <h3 className={`${s.date_title} ${s.first}`}>{galleryItem.create_date.slice(0, 4)}</h3>}\r\n\r\n\t\t\t\t\t\t\t\t<Link to={`/gallery/${galleryItem.id}`} className={s.item} key={`${galleryItem.id}gallery`}>\r\n\t\t\t\t\t\t\t\t\t{galleryItem.thumb && <img className={s.main_img} src={`${galleryItem.thumb}`} />}\r\n\t\t\t\t\t\t\t\t\t<p className={s.item_title}>\r\n\t\t\t\t\t\t\t\t\t\t<span className={s.item_date}>\r\n\t\t\t\t\t\t\t\t\t\t\t<img src={clockIcon} alt=\"\" /> {reversDateWithoutTime(galleryItem.create_date)}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t{galleryItem.title}\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t<span className={s.item_btn} href=\"\">\r\n\t\t\t\t\t\t\t\t\t\tПереглянути\r\n\t\t\t\t\t\t\t\t\t\t<img src={arrowIcon} alt=\"\" />\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t{adminStatus && <EditAdminButton link={`add-change-gallery/${galleryItem.id}`} />}\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t) : (\r\n\t\t\t\t<p style={{ fontSize: '16px', color: '#7d7d7d' }}>Немає файлів</p>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default GalleryList;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}