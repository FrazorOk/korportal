{"ast":null,"code":"import s from'./EventSection.module.css';import calendarIcon from'../../../assets/img/icons/calendar-icon.svg';import{memo,useEffect,useState}from'react';import{getNews}from'../../../api/api';import{dateConverterFromYMD}from'../../../helpers/dateConverter';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const dateToYMD=(date,year)=>{let d=date.getDate();let m=date.getMonth()+1;return new Date(''+year+'-'+(m<=9?'0'+m:m)+'-'+(d<=9?'0'+d:d));};const dateToYMDArray=(date,year)=>{let d=date.slice(0,2);let m=date.slice(3,5);return new Date(''+year+'-'+m+'-'+d);};const EventSection=()=>{let[data,setData]=useState(null);useEffect(()=>{getNews(setData,0,2);},[]);useEffect(()=>{if(data){// Константи для дат\nlet year=new Date().getFullYear();let nulledDay=new Date(`${year}-01-01`);let today=new Date();// сегодня\n// Створення індексу сортування та дат (для додавання у календар)\nlet filteredArray=data.map(item=>{// Форматування для ЮА дати\nlet formatedDate=dateConverter(item.pub_date);// днів до сьогодні\nlet daysToday=Math.ceil(Math.abs(dateToYMD(today,year).getTime()-nulledDay.getTime())/(1000*3600*24));let allDaysInYear=Math.ceil(Math.abs(new Date(`${year}-12-31`).getTime()-nulledDay.getTime())/(1000*3600*24));let daysA=Math.ceil(Math.abs(dateToYMDArray(item.pub_date,year).getTime()-nulledDay.getTime())/(1000*3600*24));// date for calendar ms\nconst dayMilliseconds=24*60*60*1000;if(daysA-daysToday<0){// date for calendar ms\nlet dateInSeconds=dateToYMDArray(item.pub_date,year*1+1).setTime(dateToYMDArray(item.pub_date,year*1+1).getTime()-dayMilliseconds);let dateForCalendarBefor=encodeURI(new Date(dateInSeconds).toISOString()).slice(0,10);let dateForCalendarAfter=encodeURI(dateToYMDArray(item.pub_date,year*1+1).toISOString()).slice(0,10);return{...item,index:allDaysInYear+1+daysA-daysToday,dateForCalendar:{befor:dateForCalendarBefor,after:dateForCalendarAfter},uaDate:formatedDate};}// date for calendar ms\nlet dateInSeconds=dateToYMDArray(item.pub_date,year).setTime(dateToYMDArray(item.pub_date,year).getTime()-dayMilliseconds);let dateForCalendarBefor=encodeURI(new Date(dateInSeconds).toISOString()).slice(0,10);let dateForCalendarAfter=encodeURI(dateToYMDArray(item.pub_date,year).toISOString()).slice(0,10);return{...item,index:daysA-daysToday,dateForCalendar:{befor:dateForCalendarBefor,after:dateForCalendarAfter},uaDate:formatedDate};});filteredArray.sort((a,b)=>a.index-b.index);console.log(filteredArray);}},[data]);return/*#__PURE__*/_jsx(_Fragment,{children:data&&/*#__PURE__*/_jsx(\"div\",{className:s.events,children:data&&data.length>0&&data.map(eventDate=>{if(eventDate){return/*#__PURE__*/_jsxs(\"div\",{className:s.events_item,children:[/*#__PURE__*/_jsx(\"p\",{children:eventDate.title}),/*#__PURE__*/_jsxs(\"div\",{className:s.events_bottom,children:[/*#__PURE__*/_jsxs(\"div\",{className:s.events_date_row,children:[/*#__PURE__*/_jsxs(\"p\",{children:[dateConverterFromYMD(eventDate.pub_date).day,\" \",/*#__PURE__*/_jsxs(\"span\",{children:[\" \",dateConverterFromYMD(eventDate.pub_date).month]})]}),/*#__PURE__*/_jsx(\"a\",{href:\"#\",children:/*#__PURE__*/_jsx(\"img\",{src:calendarIcon,alt:\"\"})})]}),/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:s.events_link,children:\"\\u0423\\u0441\\u0456\"})]}),/*#__PURE__*/_jsx(\"span\",{className:s.figures})]});}})})});};export default/*#__PURE__*/memo(EventSection);","map":{"version":3,"names":["s","calendarIcon","memo","useEffect","useState","getNews","dateConverterFromYMD","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","dateToYMD","date","year","d","getDate","m","getMonth","Date","dateToYMDArray","slice","EventSection","data","setData","getFullYear","nulledDay","today","filteredArray","map","item","formatedDate","dateConverter","pub_date","daysToday","Math","ceil","abs","getTime","allDaysInYear","daysA","dayMilliseconds","dateInSeconds","setTime","dateForCalendarBefor","encodeURI","toISOString","dateForCalendarAfter","index","dateForCalendar","befor","after","uaDate","sort","a","b","console","log","children","className","events","length","eventDate","events_item","title","events_bottom","events_date_row","day","month","href","src","alt","events_link","figures"],"sources":["E:/web/web/2024/korportal/src/pages/HomePage/EventSection/EventSection.jsx"],"sourcesContent":["import s from './EventSection.module.css';\r\nimport calendarIcon from '../../../assets/img/icons/calendar-icon.svg';\r\nimport { memo, useEffect, useState } from 'react';\r\nimport { getNews } from '../../../api/api';\r\nimport { dateConverterFromYMD } from '../../../helpers/dateConverter';\r\n\r\nconst dateToYMD = (date, year) => {\r\n\tlet d = date.getDate();\r\n\tlet m = date.getMonth() + 1;\r\n\treturn new Date('' + year + '-' + (m <= 9 ? '0' + m : m) + '-' + (d <= 9 ? '0' + d : d));\r\n};\r\nconst dateToYMDArray = (date, year) => {\r\n\tlet d = date.slice(0, 2);\r\n\tlet m = date.slice(3, 5);\r\n\treturn new Date('' + year + '-' + m + '-' + d);\r\n};\r\n\r\nconst EventSection = () => {\r\n\tlet [data, setData] = useState(null);\r\n\r\n\tuseEffect(() => {\r\n\t\tgetNews(setData, 0, 2);\r\n\t}, []);\r\n\tuseEffect(() => {\r\n\t\tif (data) {\r\n\t\t\t// Константи для дат\r\n\t\t\tlet year = new Date().getFullYear();\r\n\t\t\tlet nulledDay = new Date(`${year}-01-01`);\r\n\t\t\tlet today = new Date(); // сегодня\r\n\r\n\t\t\t// Створення індексу сортування та дат (для додавання у календар)\r\n\t\t\tlet filteredArray = data.map((item) => {\r\n\t\t\t\t// Форматування для ЮА дати\r\n\t\t\t\tlet formatedDate = dateConverter(item.pub_date);\r\n\r\n\t\t\t\t// днів до сьогодні\r\n\t\t\t\tlet daysToday = Math.ceil(Math.abs(dateToYMD(today, year).getTime() - nulledDay.getTime()) / (1000 * 3600 * 24));\r\n\t\t\t\tlet allDaysInYear = Math.ceil(Math.abs(new Date(`${year}-12-31`).getTime() - nulledDay.getTime()) / (1000 * 3600 * 24));\r\n\t\t\t\tlet daysA = Math.ceil(Math.abs(dateToYMDArray(item.pub_date, year).getTime() - nulledDay.getTime()) / (1000 * 3600 * 24));\r\n\r\n\t\t\t\t// date for calendar ms\r\n\t\t\t\tconst dayMilliseconds = 24 * 60 * 60 * 1000;\r\n\r\n\t\t\t\tif (daysA - daysToday < 0) {\r\n\t\t\t\t\t// date for calendar ms\r\n\t\t\t\t\tlet dateInSeconds = dateToYMDArray(item.pub_date, year * 1 + 1).setTime(\r\n\t\t\t\t\t\tdateToYMDArray(item.pub_date, year * 1 + 1).getTime() - dayMilliseconds\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\tlet dateForCalendarBefor = encodeURI(new Date(dateInSeconds).toISOString()).slice(0, 10);\r\n\t\t\t\t\tlet dateForCalendarAfter = encodeURI(dateToYMDArray(item.pub_date, year * 1 + 1).toISOString()).slice(0, 10);\r\n\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\t...item,\r\n\t\t\t\t\t\tindex: allDaysInYear + 1 + daysA - daysToday,\r\n\t\t\t\t\t\tdateForCalendar: { befor: dateForCalendarBefor, after: dateForCalendarAfter },\r\n\t\t\t\t\t\tuaDate: formatedDate,\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// date for calendar ms\r\n\t\t\t\tlet dateInSeconds = dateToYMDArray(item.pub_date, year).setTime(dateToYMDArray(item.pub_date, year).getTime() - dayMilliseconds);\r\n\r\n\t\t\t\tlet dateForCalendarBefor = encodeURI(new Date(dateInSeconds).toISOString()).slice(0, 10);\r\n\t\t\t\tlet dateForCalendarAfter = encodeURI(dateToYMDArray(item.pub_date, year).toISOString()).slice(0, 10);\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...item,\r\n\t\t\t\t\tindex: daysA - daysToday,\r\n\t\t\t\t\tdateForCalendar: { befor: dateForCalendarBefor, after: dateForCalendarAfter },\r\n\t\t\t\t\tuaDate: formatedDate,\r\n\t\t\t\t};\r\n\t\t\t});\r\n\r\n\t\t\tfilteredArray.sort((a, b) => a.index - b.index);\r\n\r\n\t\t\tconsole.log(filteredArray);\r\n\t\t}\r\n\t}, [data]);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{data && (\r\n\t\t\t\t<div className={s.events}>\r\n\t\t\t\t\t{data &&\r\n\t\t\t\t\t\tdata.length > 0 &&\r\n\t\t\t\t\t\tdata.map((eventDate) => {\r\n\t\t\t\t\t\t\tif (eventDate) {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<div className={s.events_item}>\r\n\t\t\t\t\t\t\t\t\t\t<p>{eventDate.title}</p>\r\n\t\t\t\t\t\t\t\t\t\t<div className={s.events_bottom}>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className={s.events_date_row}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{dateConverterFromYMD(eventDate.pub_date).day} <span> {dateConverterFromYMD(eventDate.pub_date).month}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"#\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<img src={calendarIcon} alt=\"\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<a href=\"#\" className={s.events_link}>\r\n\t\t\t\t\t\t\t\t\t\t\t\tУсі\r\n\t\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<span className={s.figures}></span>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default memo(EventSection);\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}