{"ast":null,"code":"var _jsxFileName = \"E:\\\\WEB\\\\korportal-master\\\\src\\\\components\\\\FilesList\\\\FilesList.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport s from './FilesList.module.css';\nimport searchIcon from '../../assets/img/icons/search-icon.svg';\nimport Loader from '../UI/Loader/Loader';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst FilesList = ({\n  data,\n  setModalWindowStatus,\n  setActiveSLide,\n  isFetched\n}) => {\n  _s();\n  let [isGalleryList, setGalleryList] = useState([]);\n  let [isCurrentGalleryList, setCurrentGalleryList] = useState([]);\n  let [isPaginationIndex, setPaginationIndex] = useState(1);\n  let [isEndScroll, setEndScroll] = useState(0);\n  const handleScroll = e => {\n    let block = e.currentTarget;\n    // Відступ до кінця блоку\n    let y = 0;\n    if (Math.ceil(block.scrollTop + block.clientHeight) >= Math.ceil(block.scrollHeight) - y) {\n      setEndScroll(endScroll => endScroll + 1);\n    }\n  };\n  useEffect(() => {\n    let el = document.querySelector('.main-scroll-block');\n    el.addEventListener('scroll', e => handleScroll(e));\n    return () => {\n      el.removeEventListener('scroll', e => handleScroll(e));\n    };\n  }, []);\n  useEffect(() => {\n    setGalleryList(data);\n    setPaginationIndex(1);\n  }, [data]);\n  useEffect(() => {\n    if (isGalleryList && isCurrentGalleryList && isEndScroll > 0 && isGalleryList.length >= 20 && isCurrentGalleryList.length < isGalleryList.length) {\n      setPaginationIndex(index => index + 1);\n    }\n  }, [isEndScroll]);\n  useEffect(() => {\n    if (isPaginationIndex === 1) {\n      if (isGalleryList && isGalleryList.length > 0) {\n        setCurrentGalleryList([...isGalleryList.slice(0, 20)]);\n      } else {\n        setCurrentGalleryList([]);\n      }\n    } else {\n      setCurrentGalleryList(array => [...array, ...isGalleryList.slice(20 * (isPaginationIndex - 1), 20 * isPaginationIndex)]);\n    }\n  }, [isGalleryList, isPaginationIndex]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"row\",\n    children: isFetched ? /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: '100%',\n        height: '100px',\n        position: 'relative',\n        marginTop: '30px'\n      },\n      children: /*#__PURE__*/_jsxDEV(Loader, {\n        background: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 6\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 5\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: s.files,\n      children: isCurrentGalleryList.length > 0 ? isCurrentGalleryList.map((fileItem, fileIndex) => fileItem && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: s.files__item,\n        children: [fileItem.file_type === 'image' && /*#__PURE__*/_jsxDEV(\"img\", {\n          loading: \"lazy\",\n          className: s.file,\n          src: fileItem.thumb,\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 46\n        }, this), fileItem.file_type === 'video' && /*#__PURE__*/_jsxDEV(\"video\", {\n          controls: true,\n          loading: \"lazy\",\n          className: `${s.file} ${s.video}`,\n          src: `${fileItem.url}`,\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 12\n        }, this), fileItem.file_type !== 'video' && fileItem.file_type !== 'image' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `${s.file} ${s.other_type}`,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: fileItem.file_type\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: fileItem.url\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 12\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: s.zoom_btn,\n          onClick: () => {\n            setActiveSLide(fileIndex);\n            setModalWindowStatus(true);\n          },\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: searchIcon\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 12\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 10\n      }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          fontSize: '16px',\n          color: '#7d7d7d'\n        },\n        children: \"\\u041D\\u0435\\u043C\\u0430\\u0454 \\u0444\\u0430\\u0439\\u043B\\u0456\\u0432\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 3\n  }, this);\n};\n_s(FilesList, \"m52HTXkMvmthTZe5luRHV99HpMg=\");\n_c = FilesList;\nexport default FilesList;\nvar _c;\n$RefreshReg$(_c, \"FilesList\");","map":{"version":3,"names":["useEffect","useState","s","searchIcon","Loader","jsxDEV","_jsxDEV","FilesList","data","setModalWindowStatus","setActiveSLide","isFetched","_s","isGalleryList","setGalleryList","isCurrentGalleryList","setCurrentGalleryList","isPaginationIndex","setPaginationIndex","isEndScroll","setEndScroll","handleScroll","e","block","currentTarget","y","Math","ceil","scrollTop","clientHeight","scrollHeight","endScroll","el","document","querySelector","addEventListener","removeEventListener","length","index","slice","array","className","children","style","width","height","position","marginTop","background","fileName","_jsxFileName","lineNumber","columnNumber","files","map","fileItem","fileIndex","files__item","file_type","loading","file","src","thumb","alt","controls","video","url","other_type","zoom_btn","onClick","fontSize","color","_c","$RefreshReg$"],"sources":["E:/WEB/korportal-master/src/components/FilesList/FilesList.jsx"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport s from './FilesList.module.css';\r\nimport searchIcon from '../../assets/img/icons/search-icon.svg';\r\nimport Loader from '../UI/Loader/Loader';\r\n\r\nconst FilesList = ({ data, setModalWindowStatus, setActiveSLide, isFetched }) => {\r\n\tlet [isGalleryList, setGalleryList] = useState([]);\r\n\tlet [isCurrentGalleryList, setCurrentGalleryList] = useState([]);\r\n\tlet [isPaginationIndex, setPaginationIndex] = useState(1);\r\n\tlet [isEndScroll, setEndScroll] = useState(0);\r\n\r\n\tconst handleScroll = (e) => {\r\n\t\tlet block = e.currentTarget;\r\n\t\t// Відступ до кінця блоку\r\n\t\tlet y = 0;\r\n\t\tif (Math.ceil(block.scrollTop + block.clientHeight) >= Math.ceil(block.scrollHeight) - y) {\r\n\t\t\tsetEndScroll((endScroll) => endScroll + 1);\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tlet el = document.querySelector('.main-scroll-block');\r\n\t\tel.addEventListener('scroll', (e) => handleScroll(e));\r\n\t\treturn () => {\r\n\t\t\tel.removeEventListener('scroll', (e) => handleScroll(e));\r\n\t\t};\r\n\t}, []);\r\n\tuseEffect(() => {\r\n\t\tsetGalleryList(data);\r\n\t\tsetPaginationIndex(1);\r\n\t}, [data]);\r\n\tuseEffect(() => {\r\n\t\tif (\r\n\t\t\tisGalleryList &&\r\n\t\t\tisCurrentGalleryList &&\r\n\t\t\tisEndScroll > 0 &&\r\n\t\t\tisGalleryList.length >= 20 &&\r\n\t\t\tisCurrentGalleryList.length < isGalleryList.length\r\n\t\t) {\r\n\t\t\tsetPaginationIndex((index) => index + 1);\r\n\t\t}\r\n\t}, [isEndScroll]);\r\n\tuseEffect(() => {\r\n\t\tif (isPaginationIndex === 1) {\r\n\t\t\tif (isGalleryList && isGalleryList.length > 0) {\r\n\t\t\t\tsetCurrentGalleryList([...isGalleryList.slice(0, 20)]);\r\n\t\t\t} else {\r\n\t\t\t\tsetCurrentGalleryList([]);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tsetCurrentGalleryList((array) => [...array, ...isGalleryList.slice(20 * (isPaginationIndex - 1), 20 * isPaginationIndex)]);\r\n\t\t}\r\n\t}, [isGalleryList, isPaginationIndex]);\r\n\r\n\treturn (\r\n\t\t<div className=\"row\">\r\n\t\t\t{isFetched ? (\r\n\t\t\t\t<div style={{ width: '100%', height: '100px', position: 'relative', marginTop: '30px' }}>\r\n\t\t\t\t\t<Loader background={true} />\r\n\t\t\t\t</div>\r\n\t\t\t) : (\r\n\t\t\t\t<div className={s.files}>\r\n\t\t\t\t\t{isCurrentGalleryList.length > 0 ? (\r\n\t\t\t\t\t\tisCurrentGalleryList.map(\r\n\t\t\t\t\t\t\t(fileItem, fileIndex) =>\r\n\t\t\t\t\t\t\t\tfileItem && (\r\n\t\t\t\t\t\t\t\t\t<div className={s.files__item}>\r\n\t\t\t\t\t\t\t\t\t\t{fileItem.file_type === 'image' && <img loading=\"lazy\" className={s.file} src={fileItem.thumb} alt=\"\" />}\r\n\t\t\t\t\t\t\t\t\t\t{fileItem.file_type === 'video' && (\r\n\t\t\t\t\t\t\t\t\t\t\t<video controls loading=\"lazy\" className={`${s.file} ${s.video}`} src={`${fileItem.url}`} alt=\"\" />\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t{fileItem.file_type !== 'video' && fileItem.file_type !== 'image' && (\r\n\t\t\t\t\t\t\t\t\t\t\t<div className={`${s.file} ${s.other_type}`}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span>{fileItem.file_type}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span>{fileItem.url}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={s.zoom_btn}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetActiveSLide(fileIndex);\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetModalWindowStatus(true);\r\n\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t<img src={searchIcon} />\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<p style={{ fontSize: '16px', color: '#7d7d7d' }}>Немає файлів</p>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default FilesList;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}