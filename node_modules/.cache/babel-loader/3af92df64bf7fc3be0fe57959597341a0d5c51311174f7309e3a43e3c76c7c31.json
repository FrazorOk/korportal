{"ast":null,"code":"import s from'./NotificationModule.module.css';import bellIcon from'../../assets/img/icons/bell-icon.svg';import newsIcon from'../../assets/img/icons/fi-rs-apps.svg';import{useEffect,useState}from'react';import{getNews}from'../../api/api';import{useSelector}from'react-redux';import{userSelector}from'../../selectors/userSelectors';import{useOutsideClick}from'../../hooks/useOutsideClick';import{getNewsList}from'../../api/apiNews';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const NotificationModule=_ref=>{let{mobileMode,toggleMobileMode}=_ref;let[isOpenedStatus,setOpenedStatus]=useState(false);let user=useSelector(userSelector.userData);let[isUnVisibleCount,setUnVisibleCount]=useState(0);let getDataParams=filterType=>{return{userID:user.id,fromNumber:0,limitNumber:100,filterType:filterType,qt:true,all:0,categoryID:1};};useEffect(()=>{if(user&&user.id){getNewsList(getDataParams('Не переглянуті')).then(result=>{setUnVisibleCount(result.qt);});}},[user]);useEffect(()=>{mobileMode&&setOpenedStatus(false);},[mobileMode]);const linkOnClickHandler=()=>{mobileMode&&toggleMobileMode(button=>!button);setOpenedStatus(status=>!status);};return/*#__PURE__*/_jsxs(\"div\",{className:`${s.notification_container} ${isOpenedStatus&&s.active}`,ref:useOutsideClick(()=>isOpenedStatus&&setOpenedStatus(false)),children:[/*#__PURE__*/_jsx(\"button\",{onClick:linkOnClickHandler,title:\"\\u0421\\u043F\\u043E\\u0432\\u0456\\u0449\\u0435\\u043D\\u043D\\u044F\",className:`${s.notification_btn} ${isUnVisibleCount>0&&s.red_circle}`,children:/*#__PURE__*/_jsx(\"img\",{src:bellIcon,alt:\"bell icon\"})}),/*#__PURE__*/_jsxs(\"div\",{className:s.notification_body,children:[/*#__PURE__*/_jsxs(\"p\",{className:s.body_title,children:[\"\\u0421\\u043F\\u043E\\u0432\\u0456\\u0449\\u0435\\u043D\\u043D\\u044F (\",isUnVisibleCount,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:s.body_list,children:isUnVisibleCount>0?/*#__PURE__*/_jsxs(\"a\",{onClick:()=>setOpenedStatus(false),href:'/feed-news?filter=noviews',className:s.body_link,children:[/*#__PURE__*/_jsx(\"img\",{src:newsIcon,alt:\"\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u041D\\u0435\\u043F\\u0435\\u0440\\u0435\\u0433\\u043B\\u044F\\u043D\\u0443\\u0442\\u0456 \\u043D\\u043E\\u0432\\u0438\\u043D\\u0438 (\",isUnVisibleCount,\")\"]})]}):/*#__PURE__*/_jsx(\"p\",{style:{color:'#7d7d7d'},children:\"\\u041D\\u0435\\u043C\\u0430\\u0454 \\u043D\\u043E\\u0432\\u0438\\u0445 \\u0441\\u043F\\u043E\\u0432\\u0456\\u0449\\u0435\\u043D\\u044C\"})})]})]});};export default NotificationModule;","map":{"version":3,"names":["s","bellIcon","newsIcon","useEffect","useState","getNews","useSelector","userSelector","useOutsideClick","getNewsList","jsx","_jsx","jsxs","_jsxs","NotificationModule","_ref","mobileMode","toggleMobileMode","isOpenedStatus","setOpenedStatus","user","userData","isUnVisibleCount","setUnVisibleCount","getDataParams","filterType","userID","id","fromNumber","limitNumber","qt","all","categoryID","then","result","linkOnClickHandler","button","status","className","notification_container","active","ref","children","onClick","title","notification_btn","red_circle","src","alt","notification_body","body_title","body_list","href","body_link","style","color"],"sources":["E:/web/web/2024/korportal/src/components/NotificationModule/NotificationModule.jsx"],"sourcesContent":["import s from './NotificationModule.module.css';\r\nimport bellIcon from '../../assets/img/icons/bell-icon.svg';\r\nimport newsIcon from '../../assets/img/icons/fi-rs-apps.svg';\r\nimport { useEffect, useState } from 'react';\r\nimport { getNews } from '../../api/api';\r\nimport { useSelector } from 'react-redux';\r\nimport { userSelector } from '../../selectors/userSelectors';\r\nimport { useOutsideClick } from '../../hooks/useOutsideClick';\r\nimport { getNewsList } from '../../api/apiNews';\r\n\r\nconst NotificationModule = ({ mobileMode, toggleMobileMode }) => {\r\n\tlet [isOpenedStatus, setOpenedStatus] = useState(false);\r\n\r\n\tlet user = useSelector(userSelector.userData);\r\n\r\n\tlet [isUnVisibleCount, setUnVisibleCount] = useState(0);\r\n\r\n\tlet getDataParams = (filterType) => {\r\n\t\treturn {\r\n\t\t\tuserID: user.id,\r\n\t\t\tfromNumber: 0,\r\n\t\t\tlimitNumber: 100,\r\n\t\t\tfilterType: filterType,\r\n\t\t\tqt: true,\r\n\t\t\tall: 0,\r\n\t\t\tcategoryID: 1,\r\n\t\t};\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tif (user && user.id) {\r\n\t\t\tgetNewsList(getDataParams('Не переглянуті')).then((result) => {\r\n\t\t\t\tsetUnVisibleCount(result.qt);\r\n\t\t\t});\r\n\t\t}\r\n\t}, [user]);\r\n\r\n\tuseEffect(() => {\r\n\t\tmobileMode && setOpenedStatus(false);\r\n\t}, [mobileMode]);\r\n\r\n\tconst linkOnClickHandler = () => {\r\n\t\tmobileMode && toggleMobileMode((button) => !button);\r\n\t\tsetOpenedStatus((status) => !status);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={`${s.notification_container} ${isOpenedStatus && s.active}`}\r\n\t\t\tref={useOutsideClick(() => isOpenedStatus && setOpenedStatus(false))}>\r\n\t\t\t<button onClick={linkOnClickHandler} title=\"Сповіщення\" className={`${s.notification_btn} ${isUnVisibleCount > 0 && s.red_circle}`}>\r\n\t\t\t\t<img src={bellIcon} alt=\"bell icon\" />\r\n\t\t\t</button>\r\n\r\n\t\t\t<div className={s.notification_body}>\r\n\t\t\t\t<p className={s.body_title}>Сповіщення ({isUnVisibleCount})</p>\r\n\t\t\t\t<div className={s.body_list}>\r\n\t\t\t\t\t{isUnVisibleCount > 0 ? (\r\n\t\t\t\t\t\t<a onClick={() => setOpenedStatus(false)} href={'/feed-news?filter=noviews'} className={s.body_link}>\r\n\t\t\t\t\t\t\t<img src={newsIcon} alt=\"\" />\r\n\t\t\t\t\t\t\t<span>Непереглянуті новини ({isUnVisibleCount})</span>\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<p style={{ color: '#7d7d7d' }}>Немає нових сповіщень</p>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default NotificationModule;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}