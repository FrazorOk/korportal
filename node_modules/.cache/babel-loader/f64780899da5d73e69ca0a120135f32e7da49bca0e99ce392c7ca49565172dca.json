{"ast":null,"code":"import s from'./NotificationModule.module.css';import bellIcon from'../../assets/img/icons/bell-icon.svg';import newsIcon from'../../assets/img/icons/fi-rs-apps.svg';import{useEffect,useState}from'react';import{getNews}from'../../api/api';import{useSelector}from'react-redux';import{userSelector}from'../../selectors/userSelectors';import{useOutsideClick}from'../../hooks/useOutsideClick';import{getNewsList}from'../../api/apiNews';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const NotificationModule=_ref=>{let{mobileMode,toggleMobileMode}=_ref;let userSeenNews=useSelector(userSelector.userSeenNews);let user=useSelector(userSelector.userData);let[isOpenedStatus,setOpenedStatus]=useState(false);let[isUnVisibleCount,setUnVisibleCount]=useState(0);let getDataParams=filterType=>{return{userID:user.id,fromNumber:0,limitNumber:100,filterType:filterType,qt:true,all:0,categoryID:1};};useEffect(()=>{if(user&&user.id){getNewsList(getDataParams('Не переглянуті')).then(result=>{setUnVisibleCount(result.qt);});}},[user,userSeenNews]);useEffect(()=>{mobileMode&&setOpenedStatus(false);},[mobileMode]);const linkOnClickHandler=()=>{mobileMode&&toggleMobileMode(button=>!button);setOpenedStatus(status=>!status);};return/*#__PURE__*/_jsxs(\"div\",{className:`${s.notification_container} ${isOpenedStatus&&s.active}`,ref:useOutsideClick(()=>isOpenedStatus&&setOpenedStatus(false)),children:[/*#__PURE__*/_jsx(\"button\",{onClick:linkOnClickHandler,title:\"\\u0421\\u043F\\u043E\\u0432\\u0456\\u0449\\u0435\\u043D\\u043D\\u044F\",className:`${s.notification_btn} ${isUnVisibleCount>0&&s.red_circle}`,children:/*#__PURE__*/_jsx(\"img\",{src:bellIcon,alt:\"bell icon\"})}),/*#__PURE__*/_jsxs(\"div\",{className:s.notification_body,children:[/*#__PURE__*/_jsxs(\"p\",{className:s.body_title,children:[\"\\u0421\\u043F\\u043E\\u0432\\u0456\\u0449\\u0435\\u043D\\u043D\\u044F (\",isUnVisibleCount?isUnVisibleCount:0,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:s.body_list,children:isUnVisibleCount>0?/*#__PURE__*/_jsxs(\"a\",{onClick:()=>setOpenedStatus(false),href:'/feed-news?filter=noviews',className:s.body_link,children:[/*#__PURE__*/_jsx(\"img\",{src:newsIcon,alt:\"\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u041D\\u0435\\u043F\\u0435\\u0440\\u0435\\u0433\\u043B\\u044F\\u043D\\u0443\\u0442\\u0456 \\u043D\\u043E\\u0432\\u0438\\u043D\\u0438 (\",isUnVisibleCount?isUnVisibleCount:0,\")\"]})]}):/*#__PURE__*/_jsx(\"p\",{style:{color:'#7d7d7d'},children:\"\\u041D\\u0435\\u043C\\u0430\\u0454 \\u043D\\u043E\\u0432\\u0438\\u0445 \\u0441\\u043F\\u043E\\u0432\\u0456\\u0449\\u0435\\u043D\\u044C\"})})]})]});};export default NotificationModule;","map":{"version":3,"names":["s","bellIcon","newsIcon","useEffect","useState","getNews","useSelector","userSelector","useOutsideClick","getNewsList","jsx","_jsx","jsxs","_jsxs","NotificationModule","_ref","mobileMode","toggleMobileMode","userSeenNews","user","userData","isOpenedStatus","setOpenedStatus","isUnVisibleCount","setUnVisibleCount","getDataParams","filterType","userID","id","fromNumber","limitNumber","qt","all","categoryID","then","result","linkOnClickHandler","button","status","className","notification_container","active","ref","children","onClick","title","notification_btn","red_circle","src","alt","notification_body","body_title","body_list","href","body_link","style","color"],"sources":["C:/Users/Dmytro/Downloads/korportal-master/korportal-master/src/components/NotificationModule/NotificationModule.jsx"],"sourcesContent":["import s from './NotificationModule.module.css';\nimport bellIcon from '../../assets/img/icons/bell-icon.svg';\nimport newsIcon from '../../assets/img/icons/fi-rs-apps.svg';\nimport { useEffect, useState } from 'react';\nimport { getNews } from '../../api/api';\nimport { useSelector } from 'react-redux';\nimport { userSelector } from '../../selectors/userSelectors';\nimport { useOutsideClick } from '../../hooks/useOutsideClick';\nimport { getNewsList } from '../../api/apiNews';\n\nconst NotificationModule = ({ mobileMode, toggleMobileMode }) => {\n\tlet userSeenNews = useSelector(userSelector.userSeenNews);\n\tlet user = useSelector(userSelector.userData);\n\n\tlet [isOpenedStatus, setOpenedStatus] = useState(false);\n\n\tlet [isUnVisibleCount, setUnVisibleCount] = useState(0);\n\n\tlet getDataParams = (filterType) => {\n\t\treturn {\n\t\t\tuserID: user.id,\n\t\t\tfromNumber: 0,\n\t\t\tlimitNumber: 100,\n\t\t\tfilterType: filterType,\n\t\t\tqt: true,\n\t\t\tall: 0,\n\t\t\tcategoryID: 1,\n\t\t};\n\t};\n\n\tuseEffect(() => {\n\t\tif (user && user.id) {\n\t\t\tgetNewsList(getDataParams('Не переглянуті')).then((result) => {\n\t\t\t\tsetUnVisibleCount(result.qt);\n\t\t\t});\n\t\t}\n\t}, [user, userSeenNews]);\n\n\tuseEffect(() => {\n\t\tmobileMode && setOpenedStatus(false);\n\t}, [mobileMode]);\n\n\tconst linkOnClickHandler = () => {\n\t\tmobileMode && toggleMobileMode((button) => !button);\n\t\tsetOpenedStatus((status) => !status);\n\t};\n\n\treturn (\n\t\t<div\n\t\t\tclassName={`${s.notification_container} ${isOpenedStatus && s.active}`}\n\t\t\tref={useOutsideClick(() => isOpenedStatus && setOpenedStatus(false))}>\n\t\t\t<button onClick={linkOnClickHandler} title=\"Сповіщення\" className={`${s.notification_btn} ${isUnVisibleCount > 0 && s.red_circle}`}>\n\t\t\t\t<img src={bellIcon} alt=\"bell icon\" />\n\t\t\t</button>\n\n\t\t\t<div className={s.notification_body}>\n\t\t\t\t<p className={s.body_title}>Сповіщення ({isUnVisibleCount ? isUnVisibleCount : 0})</p>\n\t\t\t\t<div className={s.body_list}>\n\t\t\t\t\t{isUnVisibleCount > 0 ? (\n\t\t\t\t\t\t<a onClick={() => setOpenedStatus(false)} href={'/feed-news?filter=noviews'} className={s.body_link}>\n\t\t\t\t\t\t\t<img src={newsIcon} alt=\"\" />\n\t\t\t\t\t\t\t<span>Непереглянуті новини ({isUnVisibleCount ? isUnVisibleCount : 0})</span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<p style={{ color: '#7d7d7d' }}>Немає нових сповіщень</p>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default NotificationModule;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}