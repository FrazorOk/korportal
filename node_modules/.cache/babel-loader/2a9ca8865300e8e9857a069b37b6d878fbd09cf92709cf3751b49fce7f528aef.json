{"ast":null,"code":"import s from'./GalleryList.module.css';import arrowIcon from'../../assets/img/icons/arrow-down-icon.svg';import clockIcon from'../../assets/img/icons/clock-icon.svg';import{useEffect,useState}from'react';import{Link}from'react-router-dom';import EditAdminButton from'../UI/EditAdminButton/EditAdminButton';import{reversDateWithoutTime}from'../../helpers/dateConverter';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const GalleryList=_ref=>{let{galleryList,adminStatus=false}=_ref;let[isGalleryList,setGalleryList]=useState([]);let[isCurrentGalleryList,setCurrentGalleryList]=useState([]);let[isPaginationIndex,setPaginationIndex]=useState(1);let[isEndScroll,setEndScroll]=useState(0);const handleScroll=e=>{let block=e.currentTarget;// Відступ до кінця блоку\nlet y=0;if(Math.ceil(block.scrollTop+block.clientHeight)>=Math.ceil(block.scrollHeight)-y){setEndScroll(endScroll=>endScroll+1);}};useEffect(()=>{let el=document.querySelector('.main-scroll-block');el.addEventListener('scroll',e=>handleScroll(e));return()=>{el.removeEventListener('scroll',e=>handleScroll(e));};},[]);useEffect(()=>{setPaginationIndex(1);setTimeout(()=>setCurrentGalleryList([]));setTimeout(()=>setGalleryList(galleryList),2);},[galleryList]);useEffect(()=>{if(isEndScroll>0&&isGalleryList.length>=20&&isCurrentGalleryList.length<isGalleryList.length){setPaginationIndex(index=>index+1);}},[isEndScroll]);useEffect(()=>{if(isGalleryList&&isGalleryList.length>0){setCurrentGalleryList(array=>[...array,...isGalleryList.slice(20*(isPaginationIndex-1),20*isPaginationIndex)]);}},[isGalleryList,isPaginationIndex]);return/*#__PURE__*/_jsx(\"div\",{className:s.list,children:isCurrentGalleryList&&isCurrentGalleryList.length>0?isCurrentGalleryList.map((galleryItem,galleryIndex)=>galleryItem&&/*#__PURE__*/_jsxs(_Fragment,{children:[isCurrentGalleryList[galleryIndex-1]&&galleryItem.create_date.slice(0,4)!==isCurrentGalleryList[galleryIndex-1].create_date.slice(0,4)&&/*#__PURE__*/_jsx(\"h3\",{className:s.date_title,children:galleryItem.create_date.slice(0,4)}),galleryIndex===0&&/*#__PURE__*/_jsx(\"h3\",{className:`${s.date_title} ${s.first}`,children:galleryItem.create_date.slice(0,4)}),/*#__PURE__*/_jsxs(Link,{to:`/gallery/${galleryItem.id}`,className:s.item,children:[galleryItem.thumb&&/*#__PURE__*/_jsx(\"img\",{className:s.main_img,src:`${galleryItem.thumb}`}),/*#__PURE__*/_jsxs(\"p\",{className:s.item_title,children:[/*#__PURE__*/_jsxs(\"span\",{className:s.item_date,children:[/*#__PURE__*/_jsx(\"img\",{src:clockIcon,alt:\"\"}),\" \",reversDateWithoutTime(galleryItem.create_date)]}),galleryItem.title]}),/*#__PURE__*/_jsxs(\"span\",{className:s.item_btn,href:\"\",children:[\"\\u041F\\u0435\\u0440\\u0435\\u0433\\u043B\\u044F\\u043D\\u0443\\u0442\\u0438\",/*#__PURE__*/_jsx(\"img\",{src:arrowIcon,alt:\"\"})]}),adminStatus&&/*#__PURE__*/_jsx(EditAdminButton,{link:`add-change-gallery/${galleryItem.id}`})]},`${galleryItem.id}gallery`)]})):/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'16px',color:'#7d7d7d'},children:\"\\u041D\\u0435\\u043C\\u0430\\u0454 \\u0444\\u0430\\u0439\\u043B\\u0456\\u0432\"})});};export default GalleryList;","map":{"version":3,"names":["s","arrowIcon","clockIcon","useEffect","useState","Link","EditAdminButton","reversDateWithoutTime","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","GalleryList","_ref","galleryList","adminStatus","isGalleryList","setGalleryList","isCurrentGalleryList","setCurrentGalleryList","isPaginationIndex","setPaginationIndex","isEndScroll","setEndScroll","handleScroll","e","block","currentTarget","y","Math","ceil","scrollTop","clientHeight","scrollHeight","endScroll","el","document","querySelector","addEventListener","removeEventListener","setTimeout","length","index","array","slice","className","list","children","map","galleryItem","galleryIndex","create_date","date_title","first","to","id","item","thumb","main_img","src","item_title","item_date","alt","title","item_btn","href","link","style","fontSize","color"],"sources":["C:/Users/Dmytro/Downloads/korportal-master/korportal-master/src/components/GalleryList/GalleryList.jsx"],"sourcesContent":["import s from './GalleryList.module.css';\nimport arrowIcon from '../../assets/img/icons/arrow-down-icon.svg';\nimport clockIcon from '../../assets/img/icons/clock-icon.svg';\nimport { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport EditAdminButton from '../UI/EditAdminButton/EditAdminButton';\nimport { reversDateWithoutTime } from '../../helpers/dateConverter';\n\nconst GalleryList = ({ galleryList, adminStatus = false }) => {\n\tlet [isGalleryList, setGalleryList] = useState([]);\n\tlet [isCurrentGalleryList, setCurrentGalleryList] = useState([]);\n\tlet [isPaginationIndex, setPaginationIndex] = useState(1);\n\tlet [isEndScroll, setEndScroll] = useState(0);\n\n\tconst handleScroll = (e) => {\n\t\tlet block = e.currentTarget;\n\t\t// Відступ до кінця блоку\n\t\tlet y = 0;\n\t\tif (Math.ceil(block.scrollTop + block.clientHeight) >= Math.ceil(block.scrollHeight) - y) {\n\t\t\tsetEndScroll((endScroll) => endScroll + 1);\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tlet el = document.querySelector('.main-scroll-block');\n\t\tel.addEventListener('scroll', (e) => handleScroll(e));\n\t\treturn () => {\n\t\t\tel.removeEventListener('scroll', (e) => handleScroll(e));\n\t\t};\n\t}, []);\n\tuseEffect(() => {\n\t\tsetPaginationIndex(1);\n\t\tsetTimeout(() => setCurrentGalleryList([]));\n\t\tsetTimeout(() => setGalleryList(galleryList), 2);\n\t}, [galleryList]);\n\tuseEffect(() => {\n\t\tif (isEndScroll > 0 && isGalleryList.length >= 20 && isCurrentGalleryList.length < isGalleryList.length) {\n\t\t\tsetPaginationIndex((index) => index + 1);\n\t\t}\n\t}, [isEndScroll]);\n\tuseEffect(() => {\n\t\tif (isGalleryList && isGalleryList.length > 0) {\n\t\t\tsetCurrentGalleryList((array) => [...array, ...isGalleryList.slice(20 * (isPaginationIndex - 1), 20 * isPaginationIndex)]);\n\t\t}\n\t}, [isGalleryList, isPaginationIndex]);\n\n\treturn (\n\t\t<div className={s.list}>\n\t\t\t{isCurrentGalleryList && isCurrentGalleryList.length > 0 ? (\n\t\t\t\tisCurrentGalleryList.map(\n\t\t\t\t\t(galleryItem, galleryIndex) =>\n\t\t\t\t\t\tgalleryItem && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t{isCurrentGalleryList[galleryIndex - 1] &&\n\t\t\t\t\t\t\t\t\tgalleryItem.create_date.slice(0, 4) !== isCurrentGalleryList[galleryIndex - 1].create_date.slice(0, 4) && (\n\t\t\t\t\t\t\t\t\t\t<h3 className={s.date_title}>{galleryItem.create_date.slice(0, 4)}</h3>\n\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t{galleryIndex === 0 && <h3 className={`${s.date_title} ${s.first}`}>{galleryItem.create_date.slice(0, 4)}</h3>}\n\n\t\t\t\t\t\t\t\t<Link to={`/gallery/${galleryItem.id}`} className={s.item} key={`${galleryItem.id}gallery`}>\n\t\t\t\t\t\t\t\t\t{galleryItem.thumb && <img className={s.main_img} src={`${galleryItem.thumb}`} />}\n\t\t\t\t\t\t\t\t\t<p className={s.item_title}>\n\t\t\t\t\t\t\t\t\t\t<span className={s.item_date}>\n\t\t\t\t\t\t\t\t\t\t\t<img src={clockIcon} alt=\"\" /> {reversDateWithoutTime(galleryItem.create_date)}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t{galleryItem.title}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t<span className={s.item_btn} href=\"\">\n\t\t\t\t\t\t\t\t\t\tПереглянути\n\t\t\t\t\t\t\t\t\t\t<img src={arrowIcon} alt=\"\" />\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t{adminStatus && <EditAdminButton link={`add-change-gallery/${galleryItem.id}`} />}\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t) : (\n\t\t\t\t<p style={{ fontSize: '16px', color: '#7d7d7d' }}>Немає файлів</p>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport default GalleryList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}