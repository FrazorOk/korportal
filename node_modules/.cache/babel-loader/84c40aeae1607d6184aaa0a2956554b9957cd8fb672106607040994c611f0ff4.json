{"ast":null,"code":"import{useEffect,useRef,useState}from'react';import s from'./NewsItem.module.css';import arrowIcon from'../../assets/img/icons/arrow-down-icon.svg';import heartIcon from'../../assets/img/icons/heart-icon.svg';import commentsIcon from'../../assets/img/icons/comments-icon.svg';import mailIcon from'../../assets/img/icons/mail_gray_icon.svg';import clockIcon from'../../assets/img/icons/clock-icon.svg';import CommentsList from'../CommentsList/CommentsList';import{getNewsFromID,sendCommentNews}from'../../api/api';import{useSelector}from'react-redux';import{userSelector}from'../../selectors/userSelectors';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const NewsItem=_ref=>{let{item}=_ref;let ref=useRef();let user=useSelector(userSelector.userData);let{id,title,pub_date,tags,text,img,comment}=item;let[visibleStatus,toggleVisibleStatus]=useState(false);let[fetchedComments,setFetchedComments]=useState(null);let[commentsLength,setCommentsLenth]=useState(0);let[fetchingStatus,setFetchingStatus]=useState(false);useEffect(()=>{setFetchedComments(comment);},[comment]);useEffect(()=>{fetchedComments&&setCommentsLenth(fetchedComments.length);},[fetchedComments]);let commentButtonOnClickHandler=e=>{if(!visibleStatus){toggleVisibleStatus(true);}setTimeout(()=>{ref.current.focus();},100);};let sendCommetnButtonOnClickHandler=e=>{let text=ref.current.value;let sendAndGetComments=async()=>{await sendCommentNews(id,user.id,text,setFetchingStatus);await getNewsFromID(setFetchedComments,id);ref.current.value='';};sendAndGetComments();};return/*#__PURE__*/_jsxs(\"div\",{className:`${s.item} ${visibleStatus&&s.active}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:s.left_column,children:[/*#__PURE__*/_jsx(\"p\",{className:s.title,children:title&&title}),/*#__PURE__*/_jsxs(\"p\",{className:s.date,children:[/*#__PURE__*/_jsx(\"img\",{src:clockIcon,alt:\"\"}),\" \",pub_date&&pub_date]}),/*#__PURE__*/_jsx(\"div\",{className:s.tags,children:tags&&tags.map((item,index)=>/*#__PURE__*/_jsx(\"div\",{style:item==='День стажу'&&{backgroundColor:'#5182FE'},className:s.tag,children:/*#__PURE__*/_jsx(\"p\",{children:item})},index))}),text&&/*#__PURE__*/_jsx(\"p\",{dangerouslySetInnerHTML:{__html:text},className:`${s.text}`})]}),/*#__PURE__*/_jsxs(\"div\",{className:s.right_column,children:[/*#__PURE__*/_jsx(\"div\",{className:s.images_container,children:/*#__PURE__*/_jsx(\"img\",{src:img,alt:\"\"})}),/*#__PURE__*/_jsxs(\"div\",{className:s.buttons_container,children:[/*#__PURE__*/_jsxs(\"button\",{className:s.likes_button,children:[/*#__PURE__*/_jsx(\"img\",{src:heartIcon,alt:\"\"}),/*#__PURE__*/_jsx(\"p\",{children:\"0\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:commentButtonOnClickHandler,className:s.coments_button,children:[/*#__PURE__*/_jsx(\"img\",{src:commentsIcon,alt:\"\"}),/*#__PURE__*/_jsx(\"p\",{children:commentsLength})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:s.commet_container,children:[comment&&/*#__PURE__*/_jsx(CommentsList,{comment:fetchedComments}),/*#__PURE__*/_jsxs(\"div\",{className:s.coments_input,children:[/*#__PURE__*/_jsx(\"textarea\",{ref:ref,placeholder:\"\\u0412\\u0430\\u0448 \\u043A\\u043E\\u043C\\u0435\\u043D\\u0442\\u0430\\u0440...\",name:\"\",id:\"\"}),/*#__PURE__*/_jsx(\"button\",{onClick:sendCommetnButtonOnClickHandler,children:/*#__PURE__*/_jsx(\"img\",{src:mailIcon,alt:\"\"})})]})]})]}),/*#__PURE__*/_jsx(\"button\",{className:s.open_button,onClick:e=>toggleVisibleStatus(status=>visibleStatus=!status),children:/*#__PURE__*/_jsx(\"img\",{src:arrowIcon,alt:\"\"})})]});};export default NewsItem;","map":{"version":3,"names":["useEffect","useRef","useState","s","arrowIcon","heartIcon","commentsIcon","mailIcon","clockIcon","CommentsList","getNewsFromID","sendCommentNews","useSelector","userSelector","jsx","_jsx","jsxs","_jsxs","NewsItem","_ref","item","ref","user","userData","id","title","pub_date","tags","text","img","comment","visibleStatus","toggleVisibleStatus","fetchedComments","setFetchedComments","commentsLength","setCommentsLenth","fetchingStatus","setFetchingStatus","length","commentButtonOnClickHandler","e","setTimeout","current","focus","sendCommetnButtonOnClickHandler","value","sendAndGetComments","className","active","children","left_column","date","src","alt","map","index","style","backgroundColor","tag","dangerouslySetInnerHTML","__html","right_column","images_container","buttons_container","likes_button","onClick","coments_button","commet_container","coments_input","placeholder","name","open_button","status"],"sources":["E:/web/web/2024/korportal/src/components/NewsItem/NewsItem.jsx"],"sourcesContent":["import { useEffect, useRef, useState } from 'react';\r\nimport s from './NewsItem.module.css';\r\nimport arrowIcon from '../../assets/img/icons/arrow-down-icon.svg';\r\nimport heartIcon from '../../assets/img/icons/heart-icon.svg';\r\nimport commentsIcon from '../../assets/img/icons/comments-icon.svg';\r\nimport mailIcon from '../../assets/img/icons/mail_gray_icon.svg';\r\nimport clockIcon from '../../assets/img/icons/clock-icon.svg';\r\nimport CommentsList from '../CommentsList/CommentsList';\r\nimport { getNewsFromID, sendCommentNews } from '../../api/api';\r\nimport { useSelector } from 'react-redux';\r\nimport { userSelector } from '../../selectors/userSelectors';\r\n\r\nconst NewsItem = ({ item }) => {\r\n\tlet ref = useRef();\r\n\r\n\tlet user = useSelector(userSelector.userData);\r\n\tlet { id, title, pub_date, tags, text, img, comment } = item;\r\n\tlet [visibleStatus, toggleVisibleStatus] = useState(false);\r\n\tlet [fetchedComments, setFetchedComments] = useState(null);\r\n\tlet [commentsLength, setCommentsLenth] = useState(0);\r\n\tlet [fetchingStatus, setFetchingStatus] = useState(false);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetFetchedComments(comment);\r\n\t}, [comment]);\r\n\tuseEffect(() => {\r\n\t\tfetchedComments && setCommentsLenth(fetchedComments.length);\r\n\t}, [fetchedComments]);\r\n\r\n\tlet commentButtonOnClickHandler = (e) => {\r\n\t\tif (!visibleStatus) {\r\n\t\t\ttoggleVisibleStatus(true);\r\n\t\t}\r\n\t\tsetTimeout(() => {\r\n\t\t\tref.current.focus();\r\n\t\t}, 100);\r\n\t};\r\n\tlet sendCommetnButtonOnClickHandler = (e) => {\r\n\t\tlet text = ref.current.value;\r\n\r\n\t\tlet sendAndGetComments = async () => {\r\n\t\t\tawait sendCommentNews(id, user.id, text, setFetchingStatus);\r\n\t\t\tawait getNewsFromID(setFetchedComments, id);\r\n\t\t\tref.current.value = '';\r\n\t\t};\r\n\r\n\t\tsendAndGetComments();\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className={`${s.item} ${visibleStatus && s.active}`}>\r\n\t\t\t<div className={s.left_column}>\r\n\t\t\t\t<p className={s.title}>{title && title}</p>\r\n\t\t\t\t<p className={s.date}>\r\n\t\t\t\t\t<img src={clockIcon} alt=\"\" /> {pub_date && pub_date}\r\n\t\t\t\t</p>\r\n\t\t\t\t<div className={s.tags}>\r\n\t\t\t\t\t{tags &&\r\n\t\t\t\t\t\ttags.map((item, index) => (\r\n\t\t\t\t\t\t\t<div key={index} style={item === 'День стажу' && { backgroundColor: '#5182FE' }} className={s.tag}>\r\n\t\t\t\t\t\t\t\t<p>{item}</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{text && <p dangerouslySetInnerHTML={{ __html: text }} className={`${s.text}`} />}\r\n\t\t\t</div>\r\n\t\t\t<div className={s.right_column}>\r\n\t\t\t\t<div className={s.images_container}>\r\n\t\t\t\t\t<img src={img} alt=\"\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={s.buttons_container}>\r\n\t\t\t\t\t<button className={s.likes_button}>\r\n\t\t\t\t\t\t<img src={heartIcon} alt=\"\" />\r\n\t\t\t\t\t\t<p>0</p>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button onClick={commentButtonOnClickHandler} className={s.coments_button}>\r\n\t\t\t\t\t\t<img src={commentsIcon} alt=\"\" />\r\n\t\t\t\t\t\t<p>{commentsLength}</p>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={s.commet_container}>\r\n\t\t\t\t\t{comment && <CommentsList comment={fetchedComments} />}\r\n\t\t\t\t\t<div className={s.coments_input}>\r\n\t\t\t\t\t\t<textarea ref={ref} placeholder=\"Ваш коментар...\" name=\"\" id=\"\"></textarea>\r\n\t\t\t\t\t\t<button onClick={sendCommetnButtonOnClickHandler}>\r\n\t\t\t\t\t\t\t<img src={mailIcon} alt=\"\" />\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<button className={s.open_button} onClick={(e) => toggleVisibleStatus((status) => (visibleStatus = !status))}>\r\n\t\t\t\t<img src={arrowIcon} alt=\"\" />\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default NewsItem;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}