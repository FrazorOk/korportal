{"ast":null,"code":"import{memo,useEffect,useState}from'react';import s from'./VivoChatSection.module.css';import NewsList from'../NewsListTest/NewsList';import{getNews}from'../../api/api';import NewsFilter from'../NewsFilterTest/NewsFilter';import arrowLinkIcon from'../../assets/img/icons/redirect-icon.svg';import{Link,useSearchParams}from'react-router-dom';import{useSelector}from'react-redux';import{userSelector}from'../../selectors/userSelectors';import Loader from'../UI/Loader/Loader';import{getNewsList}from'../../api/apiNews';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const VivoChatSection=_ref=>{let{ref1,adminStatus,title,fullScreen}=_ref;let user=useSelector(userSelector.userData);let[data,setData]=useState(false);let[isFetching,setFetching]=useState(false);let[filterParams,setFilterParams]=useState({params:'Усі',tags:false});let[fromToNumbers,setFromToNumbers]=useState({from:0,to:10});const fetchingNewNewsList=async getDataParams=>{setFetching(true);let result=await getNewsList(getDataParams);if(result){setData(result);setFetching(false);}else{setFetching(false);console.log(`error ${result}`);}};useEffect(()=>{let getDataParams={userID:user.id,fromNumber:fromToNumbers.from,limitNumber:fromToNumbers.to,filterType:filterParams.params,all:0,categoryID:1};if(user&&user.id){setData(false);fetchingNewNewsList(getDataParams);}// let interval = setInterval(() => {\n// \tgetNews(setData);\n// }, 300000);\n// return () => {\n// \tclearInterval(interval);\n// };\n},[user,filterParams]);useEffect(()=>{},[]);// const [searchParams, setSearchParams] = useSearchParams();\n// useEffect(() => {\n// \tlet filterParam = searchParams.get('filter');\n// \tif (!isFirstLoad && filterParam && filterParam === 'noviews' && data && data.length > 0 && userSeenNews) {\n// \t\tsetFirstLoad(true);\n// \t\tsetFilterParams({ params: 'Не переглянуті', tags: false });\n// \t}\n// }, [data, searchParams, userSeenNews]);\nreturn/*#__PURE__*/_jsxs(\"div\",{ref:ref1,className:`${s.chat} section-container ${fullScreen&&s.full_screen}`,children:[title&&/*#__PURE__*/_jsxs(Link,{className:\"title_link\",title:\"\\u041F\\u0435\\u0440\\u0435\\u0439\\u0442\\u0438\",to:'feed-news',children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u0421\\u0442\\u0440\\u0456\\u0447\\u043A\\u0430 \\u043E\\u0441\\u0442\\u0430\\u043D\\u043D\\u0456\\u0445 \\u043D\\u043E\\u0432\\u0438\\u043D\"}),/*#__PURE__*/_jsx(\"img\",{src:arrowLinkIcon,alt:\"\"})]}),/*#__PURE__*/_jsx(NewsFilter,{isFetching:isFetching,setFilterParams:setFilterParams,fullScreen:fullScreen}),data!==false&&/*#__PURE__*/_jsx(NewsList,{adminStatus:adminStatus,data:data,fullScreen:fullScreen,filterParams:filterParams}),isFetching&&/*#__PURE__*/_jsx(\"div\",{style:{width:'100%',height:'100px',position:'relative',marginTop:'40px'},children:/*#__PURE__*/_jsx(Loader,{})})]});};export default/*#__PURE__*/memo(VivoChatSection);","map":{"version":3,"names":["memo","useEffect","useState","s","NewsList","getNews","NewsFilter","arrowLinkIcon","Link","useSearchParams","useSelector","userSelector","Loader","getNewsList","jsx","_jsx","jsxs","_jsxs","VivoChatSection","_ref","ref1","adminStatus","title","fullScreen","user","userData","data","setData","isFetching","setFetching","filterParams","setFilterParams","params","tags","fromToNumbers","setFromToNumbers","from","to","fetchingNewNewsList","getDataParams","result","console","log","userID","id","fromNumber","limitNumber","filterType","all","categoryID","ref","className","chat","full_screen","children","src","alt","style","width","height","position","marginTop"],"sources":["E:/web/web/2024/korportal/src/components/VivoChatSectionTest/VivoChatSection.jsx"],"sourcesContent":["import { memo, useEffect, useState } from 'react';\r\nimport s from './VivoChatSection.module.css';\r\nimport NewsList from '../NewsListTest/NewsList';\r\nimport { getNews } from '../../api/api';\r\nimport NewsFilter from '../NewsFilterTest/NewsFilter';\r\nimport arrowLinkIcon from '../../assets/img/icons/redirect-icon.svg';\r\nimport { Link, useSearchParams } from 'react-router-dom';\r\nimport { useSelector } from 'react-redux';\r\nimport { userSelector } from '../../selectors/userSelectors';\r\nimport Loader from '../UI/Loader/Loader';\r\nimport { getNewsList } from '../../api/apiNews';\r\n\r\nconst VivoChatSection = ({ ref1, adminStatus, title, fullScreen }) => {\r\n\tlet user = useSelector(userSelector.userData);\r\n\r\n\tlet [data, setData] = useState(false);\r\n\tlet [isFetching, setFetching] = useState(false);\r\n\r\n\tlet [filterParams, setFilterParams] = useState({ params: 'Усі', tags: false });\r\n\tlet [fromToNumbers, setFromToNumbers] = useState({ from: 0, to: 10 });\r\n\r\n\tconst fetchingNewNewsList = async (getDataParams) => {\r\n\t\tsetFetching(true);\r\n\t\tlet result = await getNewsList(getDataParams);\r\n\t\tif (result) {\r\n\t\t\tsetData(result);\r\n\t\t\tsetFetching(false);\r\n\t\t} else {\r\n\t\t\tsetFetching(false);\r\n\t\t\tconsole.log(`error ${result}`);\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tlet getDataParams = {\r\n\t\t\tuserID: user.id,\r\n\t\t\tfromNumber: fromToNumbers.from,\r\n\t\t\tlimitNumber: fromToNumbers.to,\r\n\t\t\tfilterType: filterParams.params,\r\n\t\t\tall: 0,\r\n\t\t\tcategoryID: 1,\r\n\t\t};\r\n\r\n\t\tif (user && user.id) {\r\n\t\t\tsetData(false);\r\n\t\t\tfetchingNewNewsList(getDataParams);\r\n\t\t}\r\n\r\n\t\t// let interval = setInterval(() => {\r\n\t\t// \tgetNews(setData);\r\n\t\t// }, 300000);\r\n\t\t// return () => {\r\n\t\t// \tclearInterval(interval);\r\n\t\t// };\r\n\t}, [user, filterParams]);\r\n\r\n\tuseEffect(() => {}, []);\r\n\r\n\t// const [searchParams, setSearchParams] = useSearchParams();\r\n\t// useEffect(() => {\r\n\t// \tlet filterParam = searchParams.get('filter');\r\n\t// \tif (!isFirstLoad && filterParam && filterParam === 'noviews' && data && data.length > 0 && userSeenNews) {\r\n\t// \t\tsetFirstLoad(true);\r\n\t// \t\tsetFilterParams({ params: 'Не переглянуті', tags: false });\r\n\t// \t}\r\n\t// }, [data, searchParams, userSeenNews]);\r\n\r\n\treturn (\r\n\t\t<div ref={ref1} className={`${s.chat} section-container ${fullScreen && s.full_screen}`}>\r\n\t\t\t{title && (\r\n\t\t\t\t<Link className=\"title_link\" title=\"Перейти\" to={'feed-news'}>\r\n\t\t\t\t\t<h3>Стрічка останніх новин</h3>\r\n\t\t\t\t\t<img src={arrowLinkIcon} alt=\"\" />\r\n\t\t\t\t</Link>\r\n\t\t\t)}\r\n\t\t\t<NewsFilter isFetching={isFetching} setFilterParams={setFilterParams} fullScreen={fullScreen} />\r\n\t\t\t{data !== false && <NewsList adminStatus={adminStatus} data={data} fullScreen={fullScreen} filterParams={filterParams} />}\r\n\t\t\t{isFetching && (\r\n\t\t\t\t<div style={{ width: '100%', height: '100px', position: 'relative', marginTop: '40px' }}>\r\n\t\t\t\t\t<Loader />\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default memo(VivoChatSection);\r\n"],"mappings":"AAAA,OAASA,IAAI,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CACjD,MAAO,CAAAC,CAAC,KAAM,8BAA8B,CAC5C,MAAO,CAAAC,QAAQ,KAAM,0BAA0B,CAC/C,OAASC,OAAO,KAAQ,eAAe,CACvC,MAAO,CAAAC,UAAU,KAAM,8BAA8B,CACrD,MAAO,CAAAC,aAAa,KAAM,0CAA0C,CACpE,OAASC,IAAI,CAAEC,eAAe,KAAQ,kBAAkB,CACxD,OAASC,WAAW,KAAQ,aAAa,CACzC,OAASC,YAAY,KAAQ,+BAA+B,CAC5D,MAAO,CAAAC,MAAM,KAAM,qBAAqB,CACxC,OAASC,WAAW,KAAQ,mBAAmB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEhD,KAAM,CAAAC,eAAe,CAAGC,IAAA,EAA8C,IAA7C,CAAEC,IAAI,CAAEC,WAAW,CAAEC,KAAK,CAAEC,UAAW,CAAC,CAAAJ,IAAA,CAChE,GAAI,CAAAK,IAAI,CAAGd,WAAW,CAACC,YAAY,CAACc,QAAQ,CAAC,CAE7C,GAAI,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGzB,QAAQ,CAAC,KAAK,CAAC,CACrC,GAAI,CAAC0B,UAAU,CAAEC,WAAW,CAAC,CAAG3B,QAAQ,CAAC,KAAK,CAAC,CAE/C,GAAI,CAAC4B,YAAY,CAAEC,eAAe,CAAC,CAAG7B,QAAQ,CAAC,CAAE8B,MAAM,CAAE,KAAK,CAAEC,IAAI,CAAE,KAAM,CAAC,CAAC,CAC9E,GAAI,CAACC,aAAa,CAAEC,gBAAgB,CAAC,CAAGjC,QAAQ,CAAC,CAAEkC,IAAI,CAAE,CAAC,CAAEC,EAAE,CAAE,EAAG,CAAC,CAAC,CAErE,KAAM,CAAAC,mBAAmB,CAAG,KAAO,CAAAC,aAAa,EAAK,CACpDV,WAAW,CAAC,IAAI,CAAC,CACjB,GAAI,CAAAW,MAAM,CAAG,KAAM,CAAA3B,WAAW,CAAC0B,aAAa,CAAC,CAC7C,GAAIC,MAAM,CAAE,CACXb,OAAO,CAACa,MAAM,CAAC,CACfX,WAAW,CAAC,KAAK,CAAC,CACnB,CAAC,IAAM,CACNA,WAAW,CAAC,KAAK,CAAC,CAClBY,OAAO,CAACC,GAAG,CAAC,SAASF,MAAM,EAAE,CAAC,CAC/B,CACD,CAAC,CAEDvC,SAAS,CAAC,IAAM,CACf,GAAI,CAAAsC,aAAa,CAAG,CACnBI,MAAM,CAAEnB,IAAI,CAACoB,EAAE,CACfC,UAAU,CAAEX,aAAa,CAACE,IAAI,CAC9BU,WAAW,CAAEZ,aAAa,CAACG,EAAE,CAC7BU,UAAU,CAAEjB,YAAY,CAACE,MAAM,CAC/BgB,GAAG,CAAE,CAAC,CACNC,UAAU,CAAE,CACb,CAAC,CAED,GAAIzB,IAAI,EAAIA,IAAI,CAACoB,EAAE,CAAE,CACpBjB,OAAO,CAAC,KAAK,CAAC,CACdW,mBAAmB,CAACC,aAAa,CAAC,CACnC,CAEA;AACA;AACA;AACA;AACA;AACA;AACD,CAAC,CAAE,CAACf,IAAI,CAAEM,YAAY,CAAC,CAAC,CAExB7B,SAAS,CAAC,IAAM,CAAC,CAAC,CAAE,EAAE,CAAC,CAEvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,mBACCgB,KAAA,QAAKiC,GAAG,CAAE9B,IAAK,CAAC+B,SAAS,CAAE,GAAGhD,CAAC,CAACiD,IAAI,sBAAsB7B,UAAU,EAAIpB,CAAC,CAACkD,WAAW,EAAG,CAAAC,QAAA,EACtFhC,KAAK,eACLL,KAAA,CAACT,IAAI,EAAC2C,SAAS,CAAC,YAAY,CAAC7B,KAAK,CAAC,4CAAS,CAACe,EAAE,CAAE,WAAY,CAAAiB,QAAA,eAC5DvC,IAAA,OAAAuC,QAAA,CAAI,4HAAsB,CAAI,CAAC,cAC/BvC,IAAA,QAAKwC,GAAG,CAAEhD,aAAc,CAACiD,GAAG,CAAC,EAAE,CAAE,CAAC,EAC7B,CACN,cACDzC,IAAA,CAACT,UAAU,EAACsB,UAAU,CAAEA,UAAW,CAACG,eAAe,CAAEA,eAAgB,CAACR,UAAU,CAAEA,UAAW,CAAE,CAAC,CAC/FG,IAAI,GAAK,KAAK,eAAIX,IAAA,CAACX,QAAQ,EAACiB,WAAW,CAAEA,WAAY,CAACK,IAAI,CAAEA,IAAK,CAACH,UAAU,CAAEA,UAAW,CAACO,YAAY,CAAEA,YAAa,CAAE,CAAC,CACxHF,UAAU,eACVb,IAAA,QAAK0C,KAAK,CAAE,CAAEC,KAAK,CAAE,MAAM,CAAEC,MAAM,CAAE,OAAO,CAAEC,QAAQ,CAAE,UAAU,CAAEC,SAAS,CAAE,MAAO,CAAE,CAAAP,QAAA,cACvFvC,IAAA,CAACH,MAAM,GAAE,CAAC,CACN,CACL,EACG,CAAC,CAER,CAAC,CAED,2BAAeZ,IAAI,CAACkB,eAAe,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}