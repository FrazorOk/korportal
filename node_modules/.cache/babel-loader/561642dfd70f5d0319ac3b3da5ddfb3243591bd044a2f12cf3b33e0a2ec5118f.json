{"ast":null,"code":"import{useEffect,useState}from'react';import s from'./Header.module.css';import{useMsal}from'@azure/msal-react';import{callMe,callPhoto,getStructureCompany}from'../../api/graph';import{loginRequest}from'../../authConfig';import settingIcon from'../../assets/img/icons/settings-icon.svg';import bellIcon from'../../assets/img/icons/bell-icon.svg';import searchIcon from'../../assets/img/icons/search-icon.svg';import logo from'../../assets/img/Frame 40.png';import{NavLink}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Header=_ref=>{let{toggleMobileMode,mobileMode}=_ref;const{instance,accounts}=useMsal();let[urlImg,setUrlImg]=useState(null);let[graphData,setGraphData]=useState(null);function RequestProfilePhoto(){instance.acquireTokenSilent({...loginRequest,account:accounts[0]}).then(response=>{callPhoto(response.accessToken).then(response=>response.blob()).then(result=>{const url=window.URL||window.webkitURL;const blobUrl=url.createObjectURL(result);setUrlImg(blobUrl);});});}function RequestProfileData(){instance.acquireTokenSilent({...loginRequest,account:accounts[0]}).then(response=>{callMe(response.accessToken).then(response=>{setGraphData(response);});});}function RequestStructureData(){instance.acquireTokenSilent({...loginRequest,account:accounts[0]}).then(response=>{getStructureCompany(response.accessToken).then(response=>response.json()).then(result=>console.log(result));});}useEffect(()=>{RequestProfileData();RequestProfilePhoto();if(accounts.length>0){console.log(accounts[0]);let user={name:'dima'};const postData=async function(){let url=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';let data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};// Формируем запросconst\nlet response=await fetch(url,{// Метод, если не указывать, будет использоваться\nmethod:'POST',// Заголовок запроса\nheaders:{'Content-Type':'application/json'},// Данные\nbody:JSON.stringify(data)});return response.json();};postData('https://portal.softcom.ua/php/userreg.php',{name:'dima'}).then(data=>{console.log(data);});// fetch(`https://portal.softcom.ua/php/userreg.php?user_data=${encodeURI(JSON.stringify(user))}`).then((result) => {\n// \tconsole.log(JSON.stringify(user));\n// \tconsole.log(encodeURI(user));\n// \tconsole.log(result);\n// });\n}},[]);return/*#__PURE__*/_jsx(\"header\",{children:/*#__PURE__*/_jsxs(\"div\",{className:`content-container ${s.header} `,children:[/*#__PURE__*/_jsx(\"div\",{className:s.header_column,children:/*#__PURE__*/_jsx(NavLink,{to:\"/\",className:s.header_logo,children:/*#__PURE__*/_jsx(\"img\",{src:logo,alt:\"\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:s.header_column,children:[/*#__PURE__*/_jsxs(\"div\",{className:s.header_profile,children:[urlImg&&/*#__PURE__*/_jsx(\"img\",{src:`${urlImg}`,alt:\"\"}),graphData&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:graphData.displayName}),/*#__PURE__*/_jsx(\"p\",{children:graphData.jobTitle})]})]}),/*#__PURE__*/_jsx(\"div\",{className:`${s.header_mobile__button}`,children:/*#__PURE__*/_jsx(\"button\",{className:`${mobileMode&&s.visible}`,onClick:e=>toggleMobileMode(button=>!button),children:/*#__PURE__*/_jsx(\"span\",{})})})]})]})});};export default Header;","map":{"version":3,"names":["useEffect","useState","s","useMsal","callMe","callPhoto","getStructureCompany","loginRequest","settingIcon","bellIcon","searchIcon","logo","NavLink","jsx","_jsx","jsxs","_jsxs","Header","_ref","toggleMobileMode","mobileMode","instance","accounts","urlImg","setUrlImg","graphData","setGraphData","RequestProfilePhoto","acquireTokenSilent","account","then","response","accessToken","blob","result","url","window","URL","webkitURL","blobUrl","createObjectURL","RequestProfileData","RequestStructureData","json","console","log","length","user","name","postData","arguments","undefined","data","fetch","method","headers","body","JSON","stringify","children","className","header","header_column","to","header_logo","src","alt","header_profile","displayName","jobTitle","header_mobile__button","visible","onClick","e","button"],"sources":["E:/web/web/2024/korportal/src/components/Header/Header.jsx"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport s from './Header.module.css';\r\nimport { useMsal } from '@azure/msal-react';\r\nimport { callMe, callPhoto, getStructureCompany } from '../../api/graph';\r\nimport { loginRequest } from '../../authConfig';\r\nimport settingIcon from '../../assets/img/icons/settings-icon.svg';\r\nimport bellIcon from '../../assets/img/icons/bell-icon.svg';\r\nimport searchIcon from '../../assets/img/icons/search-icon.svg';\r\nimport logo from '../../assets/img/Frame 40.png';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nconst Header = ({ toggleMobileMode, mobileMode }) => {\r\n\tconst { instance, accounts } = useMsal();\r\n\tlet [urlImg, setUrlImg] = useState(null);\r\n\tlet [graphData, setGraphData] = useState(null);\r\n\r\n\tfunction RequestProfilePhoto() {\r\n\t\tinstance\r\n\t\t\t.acquireTokenSilent({\r\n\t\t\t\t...loginRequest,\r\n\t\t\t\taccount: accounts[0],\r\n\t\t\t})\r\n\t\t\t.then((response) => {\r\n\t\t\t\tcallPhoto(response.accessToken)\r\n\t\t\t\t\t.then((response) => response.blob())\r\n\t\t\t\t\t.then((result) => {\r\n\t\t\t\t\t\tconst url = window.URL || window.webkitURL;\r\n\t\t\t\t\t\tconst blobUrl = url.createObjectURL(result);\r\n\t\t\t\t\t\tsetUrlImg(blobUrl);\r\n\t\t\t\t\t});\r\n\t\t\t});\r\n\t}\r\n\r\n\tfunction RequestProfileData() {\r\n\t\tinstance\r\n\t\t\t.acquireTokenSilent({\r\n\t\t\t\t...loginRequest,\r\n\t\t\t\taccount: accounts[0],\r\n\t\t\t})\r\n\t\t\t.then((response) => {\r\n\t\t\t\tcallMe(response.accessToken).then((response) => {\r\n\t\t\t\t\tsetGraphData(response);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t}\r\n\r\n\tfunction RequestStructureData() {\r\n\t\tinstance\r\n\t\t\t.acquireTokenSilent({\r\n\t\t\t\t...loginRequest,\r\n\t\t\t\taccount: accounts[0],\r\n\t\t\t})\r\n\t\t\t.then((response) => {\r\n\t\t\t\tgetStructureCompany(response.accessToken)\r\n\t\t\t\t\t.then((response) => response.json())\r\n\t\t\t\t\t.then((result) => console.log(result));\r\n\t\t\t});\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tRequestProfileData();\r\n\t\tRequestProfilePhoto();\r\n\r\n\t\tif (accounts.length > 0) {\r\n\t\t\tconsole.log(accounts[0]);\r\n\r\n\t\t\tlet user = {\r\n\t\t\t\tname: 'dima',\r\n\t\t\t};\r\n\r\n\t\t\tconst postData = async (url = '', data = {}) => {\r\n\t\t\t\t// Формируем запросconst\r\n\t\t\t\tlet response = await fetch(url, {\r\n\t\t\t\t\t// Метод, если не указывать, будет использоваться\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\t// Заголовок запроса\r\n\t\t\t\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\t\t\t\t// Данные\r\n\t\t\t\t\tbody: JSON.stringify(data),\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn response.json();\r\n\t\t\t};\r\n\t\t\tpostData('https://portal.softcom.ua/php/userreg.php', { name: 'dima' }).then((data) => {\r\n\t\t\t\tconsole.log(data);\r\n\t\t\t});\r\n\r\n\t\t\t// fetch(`https://portal.softcom.ua/php/userreg.php?user_data=${encodeURI(JSON.stringify(user))}`).then((result) => {\r\n\t\t\t// \tconsole.log(JSON.stringify(user));\r\n\t\t\t// \tconsole.log(encodeURI(user));\r\n\t\t\t// \tconsole.log(result);\r\n\t\t\t// });\r\n\t\t}\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<header>\r\n\t\t\t<div className={`content-container ${s.header} `}>\r\n\t\t\t\t<div className={s.header_column}>\r\n\t\t\t\t\t<NavLink to=\"/\" className={s.header_logo}>\r\n\t\t\t\t\t\t<img src={logo} alt=\"\" />\r\n\t\t\t\t\t</NavLink>\r\n\r\n\t\t\t\t\t{/* Панель ПОШУКУ */}\r\n\t\t\t\t\t{/* <div className={s.header_search}>\r\n\t\t\t\t\t\t<button>\r\n\t\t\t\t\t\t\t<img src={searchIcon} alt=\"bell icon\" />\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<input type=\"text\" placeholder=\"Пошук тут...\" />\r\n\t\t\t\t\t</div> */}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={s.header_column}>\r\n\t\t\t\t\t{/* КНОПКИ НАЛАШТУВАННЯ ТА ОПОВІЩЕННЯ */}\r\n\t\t\t\t\t{/* <div className={s.header_btns}>\r\n\t\t\t\t\t\t<a href=\"\">\r\n\t\t\t\t\t\t\t<img src={settingIcon} alt=\"setting icon\" />\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t<a href=\"\" className={s.active}>\r\n\t\t\t\t\t\t\t<img src={bellIcon} alt=\"bell icon\" />\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div> */}\r\n\t\t\t\t\t<div className={s.header_profile}>\r\n\t\t\t\t\t\t{urlImg && <img src={`${urlImg}`} alt=\"\" />}\r\n\t\t\t\t\t\t{graphData && (\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<p>{graphData.displayName}</p>\r\n\t\t\t\t\t\t\t\t<p>{graphData.jobTitle}</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className={`${s.header_mobile__button}`}>\r\n\t\t\t\t\t\t<button className={`${mobileMode && s.visible}`} onClick={(e) => toggleMobileMode((button) => !button)}>\r\n\t\t\t\t\t\t\t<span></span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</header>\r\n\t);\r\n};\r\n\r\nexport default Header;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}