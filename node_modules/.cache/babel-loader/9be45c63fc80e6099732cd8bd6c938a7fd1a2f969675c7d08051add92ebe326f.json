{"ast":null,"code":"import s from'./EventSection.module.css';import calendarIcon from'../../../assets/img/icons/calendar-icon.svg';import{memo,useEffect,useState}from'react';import{getNews}from'../../../api/api';import{dateConverter,dateConverterFromYMD}from'../../../helpers/dateConverter';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const dateToYMD=(date,year)=>{let d=date.getDate();let m=date.getMonth()+1;return new Date(''+year+'-'+(m<=9?'0'+m:m)+'-'+(d<=9?'0'+d:d));};const dateToYMDArray=(date,year)=>{let d=date.slice(0,2);let m=date.slice(3,5);return new Date(''+year+'-'+m+'-'+d);};const EventSection=()=>{let[data,setData]=useState(null);useEffect(()=>{getNews(setData,1,2);},[]);useEffect(()=>{if(data){// Константи для дат\nlet year=new Date().getFullYear();let nulledDay=new Date(`${year}-01-01`);let today=new Date();// сегодня\n// Створення індексу сортування та дат (для додавання у календар)\nlet filteredArray=data.map(item=>{if(item){// Форматування для ЮА дати\nlet formatedDate=dateConverter(item.pub_date);// днів до сьогодні\nlet daysToday=Math.ceil(Math.abs(dateToYMD(today,year).getTime()-nulledDay.getTime())/(1000*3600*24));let allDaysInYear=Math.ceil(Math.abs(new Date(`${year}-12-31`).getTime()-nulledDay.getTime())/(1000*3600*24));let daysA=Math.ceil(Math.abs(dateToYMDArray(item.pub_date,year).getTime()-nulledDay.getTime())/(1000*3600*24));// date for calendar ms\nconst dayMilliseconds=24*60*60*1000;if(daysA-daysToday<0){// date for calendar ms\n// let dateInSeconds = dateToYMDArray(item.pub_date, year * 1 + 1).setTime(\n// \tdateToYMDArray(item.pub_date, year * 1 + 1).getTime() - dayMilliseconds\n// );\n// let dateForCalendarBefor = encodeURI(new Date(dateInSeconds).toISOString()).slice(0, 10);\n// let dateForCalendarAfter = encodeURI(dateToYMDArray(item.pub_date, year * 1 + 1).toISOString()).slice(0, 10);\nreturn{...item,index:allDaysInYear+1+daysA-daysToday,// dateForCalendar: { befor: dateForCalendarBefor, after: dateForCalendarAfter },\nuaDate:formatedDate};}// date for calendar ms\n// let dateInSeconds = dateToYMDArray(item.pub_date, year).setTime(dateToYMDArray(item.pub_date, year).getTime() - dayMilliseconds);\n// let dateForCalendarBefor = encodeURI(new Date(dateInSeconds).toISOString()).slice(0, 10);\n// let dateForCalendarAfter = encodeURI(dateToYMDArray(item.pub_date, year).toISOString()).slice(0, 10);\nreturn{...item,index:daysA-daysToday,// dateForCalendar: { befor: dateForCalendarBefor, after: dateForCalendarAfter },\nuaDate:formatedDate};}});filteredArray.sort((a,b)=>a.index-b.index);console.log(filteredArray);}},[data]);return/*#__PURE__*/_jsx(_Fragment,{children:data&&/*#__PURE__*/_jsx(\"div\",{className:s.events,children:data&&data.length>0&&data.map(eventDate=>{if(eventDate){return/*#__PURE__*/_jsxs(\"div\",{className:s.events_item,children:[/*#__PURE__*/_jsx(\"p\",{children:eventDate.title}),/*#__PURE__*/_jsxs(\"div\",{className:s.events_bottom,children:[/*#__PURE__*/_jsxs(\"div\",{className:s.events_date_row,children:[/*#__PURE__*/_jsxs(\"p\",{children:[dateConverterFromYMD(eventDate.pub_date).day,\" \",/*#__PURE__*/_jsxs(\"span\",{children:[\" \",dateConverterFromYMD(eventDate.pub_date).month]})]}),/*#__PURE__*/_jsx(\"a\",{href:\"#\",children:/*#__PURE__*/_jsx(\"img\",{src:calendarIcon,alt:\"\"})})]}),/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:s.events_link,children:\"\\u0423\\u0441\\u0456\"})]}),/*#__PURE__*/_jsx(\"span\",{className:s.figures})]});}})})});};export default/*#__PURE__*/memo(EventSection);","map":{"version":3,"names":["s","calendarIcon","memo","useEffect","useState","getNews","dateConverter","dateConverterFromYMD","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","dateToYMD","date","year","d","getDate","m","getMonth","Date","dateToYMDArray","slice","EventSection","data","setData","getFullYear","nulledDay","today","filteredArray","map","item","formatedDate","pub_date","daysToday","Math","ceil","abs","getTime","allDaysInYear","daysA","dayMilliseconds","index","uaDate","sort","a","b","console","log","children","className","events","length","eventDate","events_item","title","events_bottom","events_date_row","day","month","href","src","alt","events_link","figures"],"sources":["E:/web/web/2024/korportal/src/pages/HomePage/EventSection/EventSection.jsx"],"sourcesContent":["import s from './EventSection.module.css';\r\nimport calendarIcon from '../../../assets/img/icons/calendar-icon.svg';\r\nimport { memo, useEffect, useState } from 'react';\r\nimport { getNews } from '../../../api/api';\r\nimport { dateConverter, dateConverterFromYMD } from '../../../helpers/dateConverter';\r\n\r\nconst dateToYMD = (date, year) => {\r\n\tlet d = date.getDate();\r\n\tlet m = date.getMonth() + 1;\r\n\treturn new Date('' + year + '-' + (m <= 9 ? '0' + m : m) + '-' + (d <= 9 ? '0' + d : d));\r\n};\r\nconst dateToYMDArray = (date, year) => {\r\n\tlet d = date.slice(0, 2);\r\n\tlet m = date.slice(3, 5);\r\n\treturn new Date('' + year + '-' + m + '-' + d);\r\n};\r\n\r\nconst EventSection = () => {\r\n\tlet [data, setData] = useState(null);\r\n\r\n\tuseEffect(() => {\r\n\t\tgetNews(setData, 1, 2);\r\n\t}, []);\r\n\tuseEffect(() => {\r\n\t\tif (data) {\r\n\t\t\t// Константи для дат\r\n\t\t\tlet year = new Date().getFullYear();\r\n\t\t\tlet nulledDay = new Date(`${year}-01-01`);\r\n\t\t\tlet today = new Date(); // сегодня\r\n\r\n\t\t\t// Створення індексу сортування та дат (для додавання у календар)\r\n\t\t\tlet filteredArray = data.map((item) => {\r\n\t\t\t\tif (item) {\r\n\t\t\t\t\t// Форматування для ЮА дати\r\n\t\t\t\t\tlet formatedDate = dateConverter(item.pub_date);\r\n\r\n\t\t\t\t\t// днів до сьогодні\r\n\t\t\t\t\tlet daysToday = Math.ceil(Math.abs(dateToYMD(today, year).getTime() - nulledDay.getTime()) / (1000 * 3600 * 24));\r\n\t\t\t\t\tlet allDaysInYear = Math.ceil(Math.abs(new Date(`${year}-12-31`).getTime() - nulledDay.getTime()) / (1000 * 3600 * 24));\r\n\t\t\t\t\tlet daysA = Math.ceil(Math.abs(dateToYMDArray(item.pub_date, year).getTime() - nulledDay.getTime()) / (1000 * 3600 * 24));\r\n\r\n\t\t\t\t\t// date for calendar ms\r\n\t\t\t\t\tconst dayMilliseconds = 24 * 60 * 60 * 1000;\r\n\r\n\t\t\t\t\tif (daysA - daysToday < 0) {\r\n\t\t\t\t\t\t// date for calendar ms\r\n\t\t\t\t\t\t// let dateInSeconds = dateToYMDArray(item.pub_date, year * 1 + 1).setTime(\r\n\t\t\t\t\t\t// \tdateToYMDArray(item.pub_date, year * 1 + 1).getTime() - dayMilliseconds\r\n\t\t\t\t\t\t// );\r\n\r\n\t\t\t\t\t\t// let dateForCalendarBefor = encodeURI(new Date(dateInSeconds).toISOString()).slice(0, 10);\r\n\t\t\t\t\t\t// let dateForCalendarAfter = encodeURI(dateToYMDArray(item.pub_date, year * 1 + 1).toISOString()).slice(0, 10);\r\n\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t...item,\r\n\t\t\t\t\t\t\tindex: allDaysInYear + 1 + daysA - daysToday,\r\n\t\t\t\t\t\t\t// dateForCalendar: { befor: dateForCalendarBefor, after: dateForCalendarAfter },\r\n\t\t\t\t\t\t\tuaDate: formatedDate,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// date for calendar ms\r\n\t\t\t\t\t// let dateInSeconds = dateToYMDArray(item.pub_date, year).setTime(dateToYMDArray(item.pub_date, year).getTime() - dayMilliseconds);\r\n\r\n\t\t\t\t\t// let dateForCalendarBefor = encodeURI(new Date(dateInSeconds).toISOString()).slice(0, 10);\r\n\t\t\t\t\t// let dateForCalendarAfter = encodeURI(dateToYMDArray(item.pub_date, year).toISOString()).slice(0, 10);\r\n\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\t...item,\r\n\t\t\t\t\t\tindex: daysA - daysToday,\r\n\t\t\t\t\t\t// dateForCalendar: { befor: dateForCalendarBefor, after: dateForCalendarAfter },\r\n\t\t\t\t\t\tuaDate: formatedDate,\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tfilteredArray.sort((a, b) => a.index - b.index);\r\n\r\n\t\t\tconsole.log(filteredArray);\r\n\t\t}\r\n\t}, [data]);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{data && (\r\n\t\t\t\t<div className={s.events}>\r\n\t\t\t\t\t{data &&\r\n\t\t\t\t\t\tdata.length > 0 &&\r\n\t\t\t\t\t\tdata.map((eventDate) => {\r\n\t\t\t\t\t\t\tif (eventDate) {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<div className={s.events_item}>\r\n\t\t\t\t\t\t\t\t\t\t<p>{eventDate.title}</p>\r\n\t\t\t\t\t\t\t\t\t\t<div className={s.events_bottom}>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className={s.events_date_row}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{dateConverterFromYMD(eventDate.pub_date).day} <span> {dateConverterFromYMD(eventDate.pub_date).month}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"#\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<img src={calendarIcon} alt=\"\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<a href=\"#\" className={s.events_link}>\r\n\t\t\t\t\t\t\t\t\t\t\t\tУсі\r\n\t\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<span className={s.figures}></span>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default memo(EventSection);\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}